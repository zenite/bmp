<div ng-controller="syspages.views.my.workflowcenter.wfsearch as vm">
    <!--<ma-header>{{ 'WfAdvancedSearch' | translate}}</ma-header>-->
    <div class="col-md-12">
        <div class="row">
            <div class="modal-user">
                <div class="panel">
                    <div class="panel-row" style="background-color:white;">
                        <div class="container">
                            <div class="form-group">
                                <div class="col-xs-12">
                                    <div class="ma-detailinfo" style="padding-top:20px;">
                                        <div class="content">
                                            <div class="row">
                                                <div class="col-xs-4 cell">
                                                    <span class="col-xs-4 control-label ng-binding">{{:: 'Sn' | translate}}</span>
                                                    <div class="col-xs-8">
                                                        <fm-text class="form-control input-sm" type="text" fm-model="vm.selectModel.sn"></fm-text>
                                                    </div>
                                                </div>
                                                <div class="col-xs-8 cell">
                                                    <span class="col-xs-2 control-label ng-binding">{{:: 'ApplicationTime' | translate}}</span>
                                                    <div class="col-xs-10">
                                                        <div class="area-date" split="——">
                                                            <fm-datetime date class="input-sm" datetime fm-model="vm.selectModel.creationTimeStart" fm-readonly></fm-datetime>
                                                            <fm-datetime date class="input-sm" datetime fm-model="vm.selectModel.creationTimeEnd" fm-readonly></fm-datetime>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-4 cell">
                                                    <span class="col-xs-4 control-label ng-binding">{{:: 'WorkflowMainCategory' | translate}}</span>
                                                    <div class="col-xs-8">
                                                        <fm-select class="input-sm" items="vm.categories" fm-model="vm.selectModel.categoryId" callback-func="vm.loadWf(selectItem)" display-member="name"></fm-select>
                                                    </div>
                                                </div>
                                                <div class="col-xs-8 cell">
                                                    <span class="col-xs-2 control-label ng-binding">{{:: 'CompletionTime' | translate}}</span>
                                                    <div class="col-xs-10">
                                                        <div class="area-date" split="——">
                                                            <fm-datetime date class="input-sm" datetime fm-model="vm.selectModel.finishTimeStart" fm-readonly></fm-datetime>
                                                            <fm-datetime date class="input-sm" datetime fm-model="vm.selectModel.finishTimeEnd" fm-readonly></fm-datetime>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-4 cell">
                                                    <span class="col-xs-4 control-label ng-binding">{{:: 'WorkflowName' | translate}}</span>
                                                    <div class="col-xs-8">
                                                        <fm-select class="input-sm" items="vm.wfs" fm-model="vm.selectModel.wfId" display-member="name"></fm-select>
                                                    </div>
                                                </div>
                                                <div class="col-xs-4 cell">
                                                    <span class="col-xs-4 control-label ng-binding">申请人</span>
                                                    <div class="col-xs-8">
                                                        <fm-text class="input-sm" fm-model="vm.selectModel.applicantName" ></fm-text>
                                                    </div>
                                                </div>
                                                <div class="col-xs-4 cell">
                                                    <span class="col-xs-4 control-label ng-binding">{{:: 'State' | translate}}</span>
                                                    <div class="col-xs-8">
                                                        <fm-select class="input-sm" items="vm.statusDetails" fm-model="vm.selectModel.status"></fm-select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12" style="text-align:center;">
                                            <button class="btn btn-primary" ng-click="vm.select()">{{:: 'Query' | translate}}</button>
                                            <button class="btn btn-default" ng-click="vm.clear()">{{:: 'Clear' | translate}}</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="panel-body" style="min-height: 330px; position: relative;">
                        <table class="table table-striped table-hover table-condensed">
                            <thead>
                                <tr>
                                    <th>{{ 'TaskNumber' | translate}}</th>
                                    <th>{{ 'WorkflowName' | translate}}</th>
                                    <th>{{ 'Sn' | translate}}</th>
                                    <th>{{ 'Creator' | translate}}</th>
                                    <th>{{ 'ApplicationTime' | translate}}</th>
                                    <th>{{ 'CurrentStatus' | translate}}</th>
                                    <th>{{ 'WorkflowType' | translate}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="item in vm.models">
                                    <td>{{item.refId}}</td>
                                    <td>{{item.workflowName}}</td>
                                    <td><a class="ink-label" target="_blank" ng-href="/SysPages/SnNumber?id={{item.sn}}">{{item.sn}}
                                        <span ng-if="!!item.areaCode">({{item.areaCode}})</span></a></td>
                                    <td>{{item.submitter}}</td>
                                    <td>{{item.creationTime | date : 'yyyy-MM-dd HH:mm:ss'}}</td>
                                    <td>{{item.taskTitle}}</td>
                                    <td>{{item.wfdCategoryName}}</td>
                                </tr>
                            </tbody>
                        </table>
                        <div ng-if="vm.paging.totalCount > vm.paging.pageSize">
                            <ma-pager current-page="vm.paging.currentPage" load="vm.select()" total-count="vm.paging.totalCount" page-size="vm.paging.pageSize"></ma-pager>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>