<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>不明觉厉的表单设计器</title>
    <link rel="stylesheet" type="text/css" href="css/Main.css" />

    <link href="css/bpm/zui.css" rel="stylesheet" />
    <link href="css/bpm/zui-theme.css" rel="stylesheet" />

    <link href="css/bpm/app.css" rel="stylesheet" />
    <link href="css/bpm/workflowPage.css" rel="stylesheet" />
    <link href="css/bpm/mabp.css" rel="stylesheet" />
    <link href="css/newMain.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/Media.css" />
    <link href="css/font-awesome.min.css" rel="stylesheet" />
    <script src="js/Jquery/jquery-2.1.4.min.js" type="text/javascript"></script>
    <script src="js/Tool.js" type="text/javascript"></script>
    <script src="js/ControlProperty.js" type="text/javascript"></script>
    <!--http://qinsong.gotoip55.com/FormDesigner/index.html-->
</head>
<body>
    <div size="xlg" class="entire-block ng-scope ng-isolate-scope modal top am-fade" style="visibility: visible; z-index: 1; display: block;height:100%;">
        <div id="Div_Tool">
            <!--<div class="Div_ControlGroup"></div>这个DIV暂时没用上-->
            <ul id="UL_Tool" class="UL_Tool" category="基础控件">
                <li><span class="ToolItem" id="_Text">单行输入框<i class="ControlIcon fa fa-pencil"></i></span></li>
                <li><span class="ToolItem" id="_Textarea">多行输入框<i class="ControlIcon fa fa-align-left"></i></span></li>
                <li><span class="ToolItem" id="_Number">数字输入框<i class="ControlIcon fa fa-500px"></i></span></li>
                <li><span class="ToolItem" id="_DateTime">日期<i class="ControlIcon fa fa-calendar"></i></span></li>
                <li><span class="ToolItem" id="_RadioList">单选框组<i class="ControlIcon fa fa-dot-circle-o"></i></span></li>
                <li><span class="ToolItem" id="_Image">图片<i class="ControlIcon fa fa-picture-o"></i></span></li>
                <li><span class="ToolItem" id="_Remark">说明文字<i class="ControlIcon fa fa-font"></i></span></li>
                <li><span class="ToolItem" id="_Detail">明细<i class="ControlIcon fa fa-list-ul"></i></span></li>
            </ul>
            <ul class="UL_Tool" category="布局控件">
                <li><span class="ToolItem ToolItem_IsDisabled" id="_Text">流式布局[未上线]<i class="ControlIcon fa fa-bars"></i></span></li>
                <li><span class="ToolItem ToolItem_IsDisabled" id="_Text">表格布局[未上线]<i class="ControlIcon fa fa-table"></i></span></li>
            </ul>
            <div id="TempToolList" style="background:#EEE;height:300px;display:none;">
                <div id="SplitHr"></div>
                <!--
                <div class="DragDown" onmousedown="ToolHandle.SetDrag_Down(e)"><span class="ui-icon ui-icon-arrowthick-1-s"></span></div>
                <div class="DragLeft"><span class="ui-icon ui-icon-arrowthick-1-w"></span></div>
                <div class="DragRight"><span class="ui-icon ui-icon-arrowthick-1-e"></span></div>
            -->
                <!--单行输入框-->
                <div class="BasicControl">
                    <div id="TempTool_Text" class="Div_LineControl Control_Text">
                        <span class="Span_LineControl_tip_font" name="Tooltip">请输入</span>
                        <span class="Span_LineControl_text_font" style="display:none;" name="Value"></span>
                    </div>
                    <div class="txtTipId"></div>
                    <div class="lblTitle" name="Title">单行输入框</div>
                    <div title="删除" class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)" ontouchstart="javascript:alert(1)"><span class="fa fa-times"></span></div>
                </div>
                <!--多行输入框-->
                <div class="BasicControl">
                    <div id="TempTool_Textarea" class="Div_LineControl Control_Textarea" style="height:100px;">
                        <span class="Span_LineControl_tip_font" name="Tooltip">请输入</span>
                        <span class="Span_LineControl_text_font" style="display:none;" name="Value"></span>
                    </div>
                    <!--<div class="DragDown" onmousedown="ToolHandle.SetDrag_Down(event)"><span class="ui-icon ui-icon-arrowthick-1-s"></span></div>-->
                    <div class="txtTipId"></div>
                    <div class="lblTitle" name="Title">多行输入框</div>
                    <!--<div title="复原" class="btnRecovery" onclick="ToolHandle.RecoveryOfCon(this)"><span class="ui-icon ui-icon-arrowreturnthick-1-s"></span></div>-->
                    <div title="删除" class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="fa fa-times"></span></div>
                </div>
                <!--数字输入框-->
                <div class="BasicControl">
                    <div id="TempTool_Number" class="Div_LineControl Control_Number">
                        <span class="Span_LineControl_tip_font" name="Tooltip">请输入</span>
                        <span class="Span_LineControl_text_font" style="display:none;" name="Value"></span>
                    </div>
                    <div class="txtTipId"></div>
                    <div class="lblTitle" name="Title">数字输入框</div>
                    <div class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="fa fa-times"></span></div>
                </div>
                <!--单选框-->
                <div class="BasicControl">
                    <div id="TempTool_Combobox" class="Div_LineControl Control_Combobox">
                        <span class="Span_LineControl_title_font" name="Title">单选框组</span>
                    </div>
                    <div class="txtTipId"></div>
                    <div class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="fa fa-times"></span></div>
                </div>
                <!--日期选择框-->
                <div class="BasicControl">
                    <div id="TempTool_DateTime" class="Div_LineControl Control_Datetime">
                        <span class="Span_LineControl_tip_font" name="Tooltip">下拉选择</span>
                        <span class="Span_LineControl_text_font" style="display:none;" name="Value"></span>
                    </div>
                    <div class="txtTipId"></div>
                    <div class="lblTitle" name="Title">日期选择框</div>
                    <div class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="fa fa-times"></span></div>
                </div>
                <!--图片框-->
                <div class="BasicControl">
                    <div id="TempTool_Image" class="Div_LineControl Control_Image">
                        <span class="Span_LineControl_tip_font" name="UrlText"></span>
                        <img class="Span_LineControl_Image" name="Url" />
                    </div>
                    <div class="txtTipId"></div>
                    <div class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="fa fa-times"></span></div>
                </div>
                <!--明细框-->
                <div class="BasicControl">
                    <div id="TempTool_Detail" class="Div_ControlGroup Control_Detail Span_LineControl_title_font">
                        <span class="Span_ControlGroup_title_font" name="Title">明细</span>
                        <span class="Span_ControlGroup_adddetail_button">增加明细</span>
                    </div>
                    <div class="txtTipId"></div>
                    <div title="删除" class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="fa fa-times"></span></div>
                </div>
                <!--说明框-->
                <div class="BasicControl">
                    <div id="TempTool_Remark" class="Div_LineControl Control_Remark">
                        <span class="Span_LineControl_title_font" name="Title">说明文字</span>
                    </div>
                    <div class="txtTipId"></div>
                    <div class="btnDel" onclick="ToolHandle.RemoveConOfButton(this)"><span class="fa fa-times"></span></div>
                </div>
            </div>
            <!-- 控件模板集合 -->
            <div id="ControlTemplet" style="background:#EEE;height:300px;display:none;">
                <ul type="BPM_PC" class="">
                    <li class="_Text">
                        <div class="row"><div class="col-md-11"><div class="form-group formsbotton"><label class="control-label col-md-3 formsline f-caption">{{Title}}{{IsRequired?<span class="required">*</span>}}</label><div class="col-md-9 f-content"><input type="text" class="form-control" {{Tooltip?jsonobj[i].Tooltip}} {{MaxLength?maxlength="{value}"}} {{Name?name="{value}"}} /><span class="help-block"></span></div></div></div></div>
                    </li>
                </ul>
                <ul type="BPM_Mobile" class=""></ul>
            </div>
            <div id="TempEditList" style="background:#EEE;height:300px;display:none;">
                <!--单行文本编辑框-->
                <input index="1" type="text" class="EditBox_TextBox" />
                <!--数字编辑框-->
                <input index="1" type="number" class="EditBox_NumberBox" />
                <!--日期编辑框-->
                <input index="1" type="date" class="EditBox_DateBox" />
                <!--日期+时间框-->
                <input index="1" type="datetime" class="EditBox_DateTimeBox" />
                <!--多行文本框-->
                <textarea index="1" class="EditBox_DateTimeBox"></textarea>
                <!--下拉选择框-->
                <select index="1" class="EditBox_Combobox"></select>
                <!--单选钮-->
                <div index="1" class="EditBox_RadioButton"></div>
                <!--复选框-->
                <div index="1" class="EditBox_Checkbox"></div>
            </div>
        </div>
        <div class="modal-dialog modal-lg" style="height: calc(100% - 60px);">
            <div class="modal-content" style="height:100%;">
                <div class="page_content ng-scope" style="height:100%;">
                    <div class="modal-body" style="height:100%;">
                        <button type="button" class="close ng-scope">×</button>
                        <div id="Div_Phone_Main" class="container form-container fm-form-block ng-scope" style="background-color: white; padding: 20px; border-radius: 6px;height: 100%;">
                        </div>
                    </div>
                    <div class="page_footer"></div>
                </div>
            </div>
        </div>
        <div id="Div_ControlProperty">
            <div class="div_TabPanel div_PropertyPanel">
            </div>
            <div class="div_TabPanel div_TaskPanel">
            </div>
            <div class="div_TabPanel div_ElsePanel">
            </div>
            <!--<table id="Table_ControlProperty" cellpadding="0" cellspacing="0">
            <thead>
                <tr>
                    <th colspan="2"><input type="button" value="设置为默认" /><input id="btnSave" type="button" value="导出Json" /></th>
                </tr>
            </thead>
            <tbody>
                <tr><th colspan="2" class="Tr_GroupTr">界面</th></tr>
                <tr><th>高度<span class="Span_RedStar">*</span></th></tr>
                <tr><td><input name="height" type="number" class="Text_Singer_Num" mytitle="请输入控件高度（必填）" value="100" /><span class="Span_Digit">px</span><span class="Text_MinusNum"></span><span class="Text_AddNum"></span></td></tr>
                <tr><th>标题<span class="Span_RedStar">*</span></th><td><input type="text" class="Text_Singer" mytitle="请输入标题（必填）" value="多行输入框" /></td></tr>
                <tr><th>提示文字</th><td><input type="text" class="Text_Singer" mytitle="请输入提示文字" value="请输入" /></td></tr>
                <tr><th colspan="2" class="Tr_GroupTr">功能</th></tr>
                <tr><th>字数限制</th><td><input type="number" class="Text_Singer_Num" mytitle="请输入最长文字长度（必填）" value="100" /><span class="Span_Digit">px</span><span class="Text_MinusNum"></span><span class="Text_AddNum"></span></td></tr>
            </tbody>
        </table>-->
        </div>
    </div>
    <script src="js/Main.js" type="text/javascript"></script>
    <script src="js/BasicControl.js" type="text/javascript"></script>
    <script src="js/Jquery/jquery-ui.min.js"></script>
    <script src="js/Jquery/jquery.ui.touch-punch.js" type="text/javascript"></script>
    <script src="js/FileSaver/Blob.js" type="text/javascript"></script>
    <script src="js/FileSaver/FileSaver.js" type="text/javascript"></script>
    <script src="js/ExportForm.js" type="text/javascript"></script>
    <script type="text/javascript">
        function SaveFile(event) {
            var BB = self.Blob;
            saveAs(new BB(
                      ["\ufeff" + JSON.stringify(_canvas.ExportJson())] //\ufeff防止utf8 bom防止中文乱码
                    , { type: "text/plain;charset=utf8" }
                ), "PageTemplet.json"
            );
        };

        function SetDefaultProperty() {
            var pros = _canvas.CurrentControl[0].Property;
            for (var item in pros) {
                if (!pros[item].IsDisabled) _canvas.CurrentControl[0].SetProperty["_" + item](pros[item].DefaultValue, item);
            }
            var current = _canvas.CurrentControl[0];
            current.CancelSelect();
            current.Select();
        }

        $(function () {
            $(".DragDown").on("touchstart", function (event) {
                event.preventDefault();
                ToolHandle.SetDrag_Down(event);
            });
            $("[mytitle]").on("touchstart", function (event) {
                $("#Div_ToolTip").hide();
            });

            var _mecon = null;
            $(".Div_LineControl").on("touchstart", function (event) {
                if (!_mecon) {
                    _mecon = this;
                    setTimeout(function () { _mecon = null }, "500");
                } else {
                    if (_mecon == this) {
                        ToolControl.MouseDoubleClick(event);
                    } else {
                        _mecon = this; setTimeout();
                        setTimeout(function () { _mecon = null }, "500");
                    }
                }
            });
        });

        document.addEventListener('touchmove', function (event) {
            if (IsChangeSize) {
                event.preventDefault();
                // 如果这个元素的位置内只有一个手指的话
                if (event.targetTouches.length == 1) {
                    ToolHandle.SetDrag_Move(event);
                }
            }
        }, false);
        document.addEventListener('touchend', function (event) {
            if (IsChangeSize) {
                event.preventDefault();
                ToolHandle.SetDrag_Up(event);
            }
        }, false);
    </script>
</body>
</html>
