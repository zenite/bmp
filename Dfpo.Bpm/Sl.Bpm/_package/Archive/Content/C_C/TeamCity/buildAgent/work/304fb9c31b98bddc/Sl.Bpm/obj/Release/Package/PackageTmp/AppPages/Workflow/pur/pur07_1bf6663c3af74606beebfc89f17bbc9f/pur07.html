<!--量产订购更新-->

<fm-form-title sn-number="{{base.snNumber}}" apply-date="{{base.applyDate}}" sub-title='base.title' fm-model="base.areaCode"></fm-form-title>
<style type="text/css">
    .fm-form-block .pur07yelloy,
    .fm-form-block .pur07yelloy .fm-text-shadetext,
    .fm-form-block .pur07yelloy input:not([type="button"]):not([type="submit"]),
    .fm-form-block .pur07yelloy textarea {
        background-color: #FFFF00 !important;
    }

    .pur07yelloy,
    .pur07yelloy .fm-text-shadetext,
    .pur07yelloy input:not([type="button"]):not([type="submit"]),
    .pur07yelloy textarea {
        background-color: #FFFF00 !important;
    }

    .fm-form-block .changecolor,
    .fm-form-block .changecolor .fm-text-shadetext,
    .fm-form-block .changecolor input:not([type="button"]):not([type="submit"]),
    .fm-form-block .changecolor textarea {
        background-color: darkorange !important;
    }

    .changecolor,
    .changecolor .fm-text-shadetext,
    .changecolor input:not([type="button"]):not([type="submit"]),
    .changecolor textarea {
        background-color: darkorange !important;
    }
</style>

<fm-group-head title="{{ base.$pageLang.ApplicantInfo }}" taskid='base.taskId' wfid='base.workflowId'></fm-group-head>

<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--申请人名字-->
            <span class="col-xs-2 control-label">{{ "ApplicantName" | translate }}</span>
            <div class="col-xs-4">
                <div class="input-group" style="width: 100%;">
                    <span class="form-label">{{base.applicant.userName}}</span>
                    <!--  <span class="input-group-btn" ng-if="!taskid">
                        <button class="btn btn-default" type="button" ng-click="base.$selectApplicant()">{{ "Choose" | translate }}</button>
                    </span>-->
                </div>
            </div>
            <!--申请人员工号-->
            <span class="col-xs-2 control-label">{{ "ApplicantEmployeeNumber" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.employeeNumber}}</span></div>
        </div>
    </div>
    <div class="form-group">
        <!--申请人部门线-->
        <div class="col-xs-12">
            <span class="col-xs-2 control-label">{{ "ApplicantDepartment" | translate }}</span>
            <div class="col-xs-10"><span class="form-label">{{base.applicant.departmentName}}</span></div>
        </div>
    </div>


</div>
<fm-group-head title="{{form.$pageLang.OrderInfo }}"></fm-group-head>

<div class="row">
    <div class="col-xs-12 "  style="padding-left:0px; padding-right:0px;">
        <table class="table table-bordered table-detail">
            <thead>
            <tr style="text-align: center;">
    
                <th style="width: 30px; font-size: 12px; padding-left: 0px;" class="checktd">
                    <input type="checkbox" class="uniform"
                           ng-checked="form.pur07sAllChecked"
                           ng-model="form.pur07sAllChecked"
                           ng-if="base.pageState==1"
                           
                           ng-click="form.$checkAll(form.pur07sAllChecked, form.pur07d)"/>
                    <strong class="input-sm" ng-if="base.pageState!=1">标记</strong>

                </th>
                <!--标记-->
                <th style="width: 50px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" ng-bind="form.$pageLang.No"></th>
                <!--序列-->
                <th style="width: 118px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" class="required" ng-bind="form.$pageLang.PoNo"></th>
                <!--采购单-->
                <th style="width: 110px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" class="required" ng-bind="form.$pageLang.Supplier"></th>
                <!--供应商-->
                <th style="width: 50px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" ng-bind="form.$pageLang.PaymentTerm"></th>
                <!--付款方式-->
                <th style="width: 50px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" ng-bind="form.$pageLang.DeliveryTerm"></th>
                <!--发送方式-->
                <th style="width: 80px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" class="required" ng-bind="form.$pageLang.ItemNumber"></th>
                <!--零件号-->
                <th style="width: 140px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" ng-bind="form.$pageLang.PartDescription"></th>
                <!--品名描述-->
                <th style="width: 50px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" class="required" ng-bind="form.$pageLang.Cur"></th>
                <!--货币-->
                <th style="width: 120px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" class="required" ng-bind="form.$pageLang.TotalUnitPrice"></th>
                <!--产品总单价-->
                <th style="width: 100px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" ng-bind="form.$pageLang.LeadTime"></th>
                <!--交期-->
                <th style="width: 100px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" ng-bind="form.$pageLang.Moq"></th>
                <!--最小订货量-->
                <th style="width: 100px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" ng-bind="form.$pageLang.Mpq"></th>
                <!--最小包装量-->
                <th style="width: 80px; font-size: 12px; text-align: center; border: 1px solid #ffffff;" ng-bind="form.$pageLang.Commodity"></th>
                <!--产品类别-->
                <th style="width: 60px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" ng-bind="form.$pageLang.ChangeReason"></th>
                <!--价格变更原因-->
                <th style="width: 120px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" ng-bind="form.$pageLang.EffDate"></th>
                <!--生效日期-->
                <th style="width: 30px; font-size: 12px; text-align: center;border: 1px solid #ffffff;" ng-bind="form.$pageLang.Remark"></th>
                <!--说明-->
            </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in form.pur07d" ng-class="{'active': item.checked}" detail-name="{{form.$pageLang.BusinessEntertainmentExpensesReimbursementList}}">
                    <!--标记-->
                    <td ng-model="item.typeid"  >

                        <input class="uniform"
                               ng-if="base.pageState==1"
                               type="checkbox" ng-model="item.mark" name="selected"/>
                        <strong class="input-sm" ng-if="base.pageState!==1">
                            {{item.mark==true?"Y":"N"}}
                        </strong>

                    </td>
                    <!--序号-->
                    <td>
                        <strong>{{ $index + 1}}</strong>
                    </td>
                     <!--采购单-->
                    <td >
                        <fm-text
                            fm-model="item.poNo"
                            class="input-sm"
                            field-name="{{form.$pageLang.PONo}}"
                            fm-placeholder="{{form.$pageLang.PONo}}"
                            disabled
                            required></fm-text>
                    </td>
                        <!--供应商-->
                    <td >

                        <fm-text
                            fm-model="item.supplier"
                            required
                            disabled
                            class="input-sm"
                            field-name="{{form.$pageLang.SupplierCode}}"
                            fm-placeholder="{{form.$pageLang.SupplierCode}}"></fm-text>
                    </td>
                        <!--付款方式-->
                    <td>
         
                        <fm-select fm-model="item.usedPaymentTerm"
                                   dataitem="PurchaseRelated>NewSupplier>SupplierCrTerms"
                                   disabled 
                                    class="input-sm"
                                   field-name="{{form.$pageLang.ExpenseType}}"></fm-select>
                        <fm-select fm-model="item.paymentTerm"
                                 class="input-sm"
                                   dataitem="PurchaseRelated>NewSupplier>SupplierCrTerms"
                                   field-name="{{form.$pageLang.ExpenseType}}"></fm-select>
                    </td>
                        <!--发送方式-->
                    <td>
                        <fm-select fm-model="item.usedDeliveryTerm"
                                   dataitem="PurchaseRelated>NewSupplier>SupplierShipVia"
                                    disabled
                                   field-name="{{form.$pageLang.ExpenseType}}"></fm-select>
                        <fm-select fm-model="item.deliveryTerm"
                                   dataitem="PurchaseRelated>NewSupplier>SupplierShipVia"
                                   field-name="{{form.$pageLang.ExpenseType}}"></fm-select>
                    </td>
                    <!--零件号-->
                    <td >
                        <fm-text
                            required
                            fm-model="item.itemNumber"
                            
                            field-name="{{form.$pageLang.ItemNumber}}"></fm-text>
                    </td>
                    <!--品名描述-->
                    <td>
                        <fm-text
                            fm-model="item.usedPartDescription"
                            
                            disabled
                            field-name="{{form.$pageLang.PartDescription}}"></fm-text>
                        <fm-text
                            fm-model="item.partDescription"
                            
                            field-name="{{form.$pageLang.PartDescription}}"></fm-text>
                    </td>
                        <!--货币-->
                    <td >
                        <fm-select field-name="{{form.$pageLang.Cur}}"
                                   view="GetCurrencyType"
                                   required
                                   
                                   fm-model="item.currency"></fm-select>
                    </td>
                        <!--产品总单价-->
                    <td>
            
                        <fm-number
                            fm-model="item.usedTotalUnitPrice"
                            disabled display-scale="6"
                            field-name="{{form.$pageLang.TotalUnitPrice}}"></fm-number>
                        <fm-number
                            fm-model="item.totalUnitPrice"
                            required
                            class="{{item.bgcolor}}"
                            cny
                            fm-blur="form.chooseS(item)"
                            
                            field-name="{{form.$pageLang.TotalUnitPrice}}"></fm-number>
                    </td>
                         <!--交期-->
                    <td >
                        <fm-number
                            fm-model="item.usedLeadTime"
                            
                            disabled
                            field-name="{{form.$pageLang.LeadTime}}"></fm-number>
                         <fm-number
                            fm-model="item.leadTime"
                            
                            field-name="{{form.$pageLang.LeadTime}}"></fm-number>
                    </td>
                          <!--最小订货量-->
                    <td>

                        <fm-number
                            fm-model="item.usedMoq"
                            
                            disabled
                            field-name="{{form.$pageLang.MOQ}}"></fm-number>
                        <fm-number
                            fm-model="item.moq"
                            
                            field-name="{{form.$pageLang.MOQ}}"></fm-number>
                    </td>
               <!--最小包装量-->
                    <td>
                        <fm-number
                            fm-model="item.usedMpq"
                            
                            disabled
                            field-name="{{form.$pageLang.MPQ}}"></fm-number>
                         <fm-number
                            fm-model="item.mpq"
                            
                            field-name="{{form.$pageLang.MPQ}}"></fm-number>
                    </td>
                    <!--产品类别-->
                    <td >
                        <fm-select fm-model="item.usedCommodity"
                                   dataitem="PurchaseRelated>PurchaseOrder>ProductType"
                                   disabled
                                   field-name="{{form.$pageLang.Commodity}}"></fm-select>
                        <fm-select fm-model="item.commodity"
                                   dataitem="PurchaseRelated>PurchaseOrder>ProductType"
                                    
                                   field-name="{{form.$pageLang.Commodity}}"></fm-select>
                    </td>
                     <!--价格变更原因-->
                    <td >
                  
                        <fm-select fm-model="item.priceChangeReason"
                                   dataitem="PurchaseRelated>PurchaseOrder>PriceChangeReason"
                                   
                                   fm-required="item.totalType"
                                   field-name="{{form.$pageLang.ChangeReason}}"></fm-select>
                    </td>
                                 <!--生效日期-->
                    <td >
                        <fm-datetime
                            fm-model="item.usedEffDate"
                            date
                            disabled
                            required
                            field-name="{{form.$pageLang.EffDate}}"></fm-datetime>
                    </td>

                     <!--说明-->
                    <td  >
                        <fm-text
                            fm-model="item.remark"
                            
                            field-name="{{form.$pageLang.Remark}}"></fm-text>
                    </td>
                </tr>

            </tbody>
        </table>
    </div>
</div>


<div class="row" >
    <div class="form-group">
        <div class="col-xs-12  text-right">
             <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.EffDate"></span>
            <div class="col-xs-4 control-label">
                     <!--生效日期-->
            <fm-datetime
                fm-model="form.pur07.effDate"
                date
                required
                field-name="{{form.$pageLang.EffDate}}"></fm-datetime>
            </div>
            <div class="col-xs-3 text-right"  ng-if="base.pageState===1">
                <fm-data-select class="fm-text-hide "
                                fm-model="form.pur07.itemSupplier"
                                view="GetMpoAppcation"
                                ismulti
                                callback-func="form.chooseSupplier(selectItem)"
                                filter="{SelectCompany:form.selectCompany,ApplicantJobId:base.applicant.userId}"
                                btntext="订单选择"></fm-data-select>
            </div>
            <div class="col-xs-2" ng-if="base.pageState==1">

                <!--<fm-import-xls
                        template="/AppPages/Workflow/pur07_1bf6663c3af74606beebfc89f17bbc9f/SchedulePO.xls"
                        start-index="0"

                        columns="['supplier','supplierCode','partNumber','partDescription']"
                        callback-func="form.getlength(selectitem)"></fm-import-xls>-->
                <fm-import-advance config="form.import"
                                   ng-if="!!base.areaCode"
                                   form-files="form.$attachments"
                                   link-id="2"
                                   task-id='base.taskId'
                                   callback-func="form.importD(importData)"></fm-import-advance>

            </div>
            <div class="col-xs-1 text-right" ng-if="!!base.areaCode&&base.pageState===1">
                <input type="button" class="btn btn-sm btn-danger" ng-click="form.delete(item)" value="{{form.$pageLang.Delete}}"/>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="form-group">
        <div class="col-xs-12" style="padding-left: 80px; padding-top: 20px;">
            <div class="col-xs-4">
                <p>价格变更原因说明：</p>
                <p>Adjust－Adjustment</p>
                <p>Costup－Cost up</p>
                <p>Ngcd－Negotiation costdown</p>
                <p>Spot－Input Spot PO</p>
                <p>Tooling－Tooling Amortize finish</p>
            </div>
            <div class="col-xs-4    ">
                <p>价格底色说明：</p>
                <p>橙色：新旧价格差值超过原价格的±10%（含±10%）</p>
                <p>黄色：新价格=原价格</p>
            </div>

        </div>
    </div>
</div>
<div class="row text-right">
    <div class="form-group">
       <div class="col-xs-12">
            <span class="col-xs-2 control-label " ></span>
            <div class="col-xs-4 control-label">
           
            </div>
        <!--供应商名称-->
        <span class="col-xs-2 control-label">供应商签字确认：</span>
        <div class="col-xs-4">
            <fm-text fm-model="form.pur03.supplierName"
                     readonly
                     field-name="{{form.$pageLang.IncumbentName}}"></fm-text>
        </div>
        </div>
       
    </div>
</div>
<div class="row">
    <div class="form-group col-xs-12 ">
        <!--说明-->
        <span class="col-xs-2 control-label" ng-bind="form.$pageLang.Remark"></span>
        <div class="col-xs-10">
            <fm-textarea fm-model="form.pur07.remark"></fm-textarea>
        </div>
    </div>
</div>
<!--附件-->
<fm-group-head class="print-hide " title="{{ 'Attachment' |translate}}"></fm-group-head>
<div class="print-hide row">
    <div class="form-group">
        <div class="col-xs-12">
            <fm-attachment form-files="form.$attachments"
                link-id="0"
                task-id='base.taskId'
                node-id="base.nodeId"
                draft-id="base.draftId"
                
                
                field-name="{{'UploadAttachment' |translate}}"
                fm-model="form.$state.UploadAttachment"
                button-name="{{ 'UploadAttachment' |translate}}"></fm-attachment>
        </div>
    </div>
</div>

