<!--Spot PO价格更新申请-->
<fm-form-title sn-number="{{base.snNumber}}" apply-date="{{base.applyDate}}" sub-title='base.title' fm-model="base.areaCode"></fm-form-title>
<fm-Group-Head class="print-hide"></fm-Group-Head>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <span control-label" ng-bind="form.$pageLang.Explain"></span>
        </div>
    </div>
</div>
<!--申请人信息-->
<fm-Group-Head class="print-hide" title="{{ base.$pageLang.ApplicantInfo }}"></fm-Group-Head>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--申请人名字-->
            <span class="col-xs-2 control-label">{{ "ApplicantName" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.userName}}</span></div>
            <!--申请人员工号-->
            <span class="col-xs-2 control-label">{{ "ApplicantEmployeeNumber" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.employeeNumber}}</span></div>
        </div>
    </div>
    <div class="form-group">
        <!--申请人部门线-->
        <div class="col-xs-12">
            <span class="col-xs-2 control-label">{{ "ApplicantDepartment" | translate }}</span>
            <div class="col-xs-10"><span class="form-label">{{base.applicant.departmentName}}</span></div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-xs-12">
            <!--申请人电话-->
            <span class="col-xs-2 control-label">{{ "ApplicantContactNumber" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.contactNumber}}</span></div>
            <!--申请人邮箱-->
            <span class="col-xs-2 control-label">{{ "ApplicantEmail" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.emailAddress}}</span></div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-xs-12">
            <!--申请人手机-->
            <span class="col-xs-2 control-label">{{ "ApplicantMobileNumber" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.mobileNumber}}</span></div>
            <!--申请人直属领导-->
            <span class="col-xs-2 control-label">{{ "ApplicantDirectManager" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.directManagerName}}</span></div>
        </div>
    </div>
</div>
<fm-Group-Head title="{{form.$pageLang.OrderInfo }}"></fm-Group-Head>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--Po No.-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Pono"></span>
            <div class="col-xs-4">
                <fm-data-select view="GetBelongsApplicatorPO"
                                required
                                filter="{Requester:base.jobId,AreaCode:base.areaCode}"
                                fm-model="form.pur13.pono"
                                field-name="{{form.$pageLang.PoNo}}"
                                callback-func="form.choosePoNumber(selectItem)"
                                fm-placeholder="{{base.$pageLang.PleaseSelect}}"></fm-data-select>
            </div>
            <!--查看-->
            <div class="col-xs-2">
                <fm-text readonly style="background-color:#DCE6F1" fm-model="form.pur13.points"></fm-text>
            </div>
            <div class="col-xs-2">
                <fm-text readonly style="background-color:#FFCCFF" fm-model="form.pur13.pointsIsChange"></fm-text>
            </div>
            <div class="col-xs-2">
                <fm-text readonly style="background-color:#FFC000" fm-model="form.pur13.pointsWasChange"></fm-text>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--供应商代码-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.SupplierCode"></span>
            <div class="col-xs-4">
                <fm-text fm-model="form.pur13.supplierCode"
                         readonly
                         required
                         style="background-color:#DCE6F1"
                         state="{{form.$pageRight.StartNode}}"
                         field-name="{{form.$pageLang.SupplierCode}}"
                         fm-placeholder="{{base.$pageLang.UnitBudget}} "></fm-text>
            </div>
            <!--供应商名称-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.SupplierName"></span>
            <div class="col-xs-4">
                <fm-text readonly
                         style="background-color:#DCE6F1"
                         fm-model="form.pur13.supplierName"
                         required
                         field-name="{{form.$pageLang.SupplierName}}"
                         fm-placeholder="{{base.$pageLang.PleaseSelect}}"></fm-text>

            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--项目代码-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.ProjectCode"></span>
            <div class="col-xs-4">
                <fm-text required
                         readonly
                         style="background-color:#DCE6F1"
                         fm-model="form.pur13.programCode"
                         callback-func="form.chooseProjectName(selectItem)"
                         field-name="{{form.$pageLang.ProjectCode}}"
                         fm-placeholder="{{base.$pageLang.PleaseSelect}}"></fm-text>
            </div>
            <!--项目名称-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.ProjectName"></span>
            <div class="col-xs-4">
                <fm-text fm-model="form.pur13.programName"
                         readonly
                         style="background-color:#DCE6F1"
                         required
                         state="{{form.$pageRight.StartNode}}"
                         field-name="{{form.$pageLang.ProjectName}}"
                         fm-placeholder="{{base.$pageLang.UnitBudget}} "></fm-text>

            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--PO申请人-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.SpotPORequester"></span>
            <div class="col-xs-4">
                <fm-data-select view="Sys_GetUserNamesByJobId"
                                readonly
                                style="background-color:#DCE6F1"
                                required
                                field-name="{{form.$pageLang.Requester}}"
                                fm-model="form.pur13.spotporequester"></fm-data-select>
            </div>
            <!--采购员-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Buyer"></span>
            <div class="col-xs-4">
                <fm-data-select view="GetBuyer"
                                required
                                readonly
                                style="background-color:#DCE6F1"
                                field-name="{{form.$pageLang.Buyer}}"
                                fm-model="form.pur13.buyer"></fm-data-select>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--总部或Fudian-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.HQorFudian"></span>
            <div class="col-xs-4">
                <fm-select dataitem="PurchaseRelated>PurchaseOrder>IsHQ"
                           readonly
                           required
                           style="background-color:#DCE6F1"
                           field-name="{{form.$pageLang.HqOrSubsidiary}}"
                           fm-model="form.pur13.hqorfudian"></fm-select>
            </div>
            <!--发票类型-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.InvoiceType"></span>
            <div class="col-xs-2">
                <fm-select state="{{form.$pageRight.StartNode}}"
                           value-member="value"
                           fm-code="form.$state.invoiceTypeCode"
                           dataitem="PurchaseRelated>PurchaseOrder>InvoiceTaxType"
                           ng-if="base.pageState==1||(base.pageState==2&&form.$pageRight.StartNode=='normal')"
                           class="{{form.changecolor.invoiceTypeChange}}"
                           callback-func="form.chooseNoAddInvoice()"
                           fm-model="form.pur13.invoiceTypeChange"></fm-select>
                <fm-select ng-if="(base.pageState==3||form.$pageRight.StartNode!='normal')&&form.pur13.invoiceTypeChange!=null&&form.pur13.invoiceTypeChange!=''"
                           field-name="{{form.$pageLang.Buyer}}"
                           state="{{'readonly'}}"
                           value-member="value"
                           fm-code="form.$state.invoiceTypeCode"
                           dataitem="PurchaseRelated>PurchaseOrder>InvoiceTaxType"
                           style="background-color:#FFC000;"
                           fm-model="form.pur13.invoiceTypeChange"></fm-select>
                <fm-select state="{{form.$pageRight.StartNode}}"
                           ng-if="(base.pageState==3||form.$pageRight.StartNode!='normal')&&(form.pur13.invoiceTypeChange==null||form.pur13.invoiceTypeChange=='')"
                           dataitem="PurchaseRelated>PurchaseOrder>InvoiceTaxType"
                           fm-code="form.$state.invoiceTypeCode"
                           value-member="value"
                           fm-model="form.pur13.invoiceTypeChange"></fm-select>
                <!--Spot Order如果修改了发票类型，则显示修改之后的值-->
                <!--<fm-select ng-if="!!form.pur20.invoiceTypeBak"
                            dataitem="PurchaseRelated>PurchaseOrder>InvoiceTaxType"
                            fm-model="form.pur20.invoiceTypeBak"
                            fm-code="form.$state.invoiceTypeCode"
                            callback-func="form.selectInvoiceType()"></fm-select>-->
            </div>

            <!--税率-->
            <div class="col-xs-2">
                <!--修改税率-->
                <div>
                    <fm-select state="{{form.$pageRight.StartNode}}"
                               ng-if="form.$state.invoiceTypeCode =='3' || form.$state.invoiceTypeCode=='1'"
                               dataitem="Common>TaxRate"
                               change1
                               value-member="value"
                               class="{{form.changecolor.invoiceTypeChange}}"
                               callback-func="form.ggg()"
                               fm-disabled="form.$state.invoiceTypeCode =='1'"
                               fm-model="form.pur13.rateChange"></fm-select>
                </div>
                <!--<div ng-if="form.$state.invoiceTypeCode=='1'">
                    <fm-text readonly
                             class="{{form.changecolor.rateChange}}"
                             fm-model="form.pur13.rateChange"></fm-text>
                </div>-->
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <table class="table table-bordered table-detail">
                <thead>
                    <tr style="background-color:#0066cc">
                        <th style="width:4%;text-align:center;" ng-bind="form.$pageLang.No"></th> <!--序号-->
                        <th style="width:8%;text-align:center;" ng-bind="form.$pageLang.Qty"></th> <!--数量-->
                        <th style="width:8%;text-align:center;" ng-bind="form.$pageLang.Qtyc"></th> <!--改后数量-->
                        <th style="width:10%;text-align:center;" ng-bind="form.$pageLang.PartNumber"></th> <!--品名-->
                        <th style="width:24%;text-align:center;" ng-bind="form.$pageLang.Description"></th> <!--品名描述-->
                        <th style="width:5%;text-align:center;" ng-bind="form.$pageLang.Currency"></th> <!--币种-->
                        <th style="width:10%;text-align:center;" ng-bind="form.$pageLang.Price"></th> <!--含税单价-->
                        <th style="width:10%;text-align:center;" ng-bind="form.$pageLang.Pricec"></th> <!--改后含税单价-->
                        <th style="width:10%;text-align:center;" ng-bind="form.$pageLang.PriceNet"></th> <!--不含税单价-->
                        <th style="width:11%;text-align:center;" ng-bind="form.$pageLang.PriceNetc"></th> <!--改后不含税单价-->
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in form.pur13pu" detail-name="{{form.$pageLang.BusinessEntertainmentExpensesReimbursementList}}">

                        <td class="auto-style1" style="background-color:#DCE6F1">
                            <fm-number ng-if="item.gridOrder!=null"
                                       class="input-sm"
                                       style="background-color:#DCE6F1"
                                       fm-model="item.gridOrder"></fm-number>
                            <span ng-if="item.gridOrder == null">{{$index + 1}}</span>
                        </td>
                        <td class="auto-style1" style="background-color:#DCE6F1">
                            <fm-number fm-model="item.number"
                                       readonly
                                       style="background-color:#DCE6F1"
                                       state="{{form.$pageRight.ACRStatus}}"
                                       field-name="{{form.$pageLang.TestBy}}"
                                       fm-placeholder="{{base.$pageLang.UnitBudget}}"></fm-number>
                        </td>
                        <td class="auto-style1" style="background-color:#DCE6F1">
                            <fm-number ng-if="base.pageState==1||(base.pageState==2&&form.$pageRight.StartNode=='normal')"
                                       state="{{form.$pageRight.StartNode}}"
                                       field-name="{{form.$pageLang.Description}}"
                                       class="{{form.changecolor.numberc}}"
                                       cny
                                       change1
                                       fm-model="item.numberc"
                                       fm-blur="form.sum()"></fm-number>
                            <fm-number ng-if="(form.$pageRight.StartNode!='normal'||base.pageState==3)&&(form.numberc!=''&&item.numberc!=null)"
                                       state="{{'readonly'}}"
                                       style="background-color:#FFC000;"
                                       cny
                                       field-name="{{form.$pageLang.Description}}"
                                       fm-model="item.numberc"></fm-number>
                            <fm-number ng-if="(form.$pageRight.StartNode!='normal'||base.pageState==3)&&(item.numberc==''||item.numberc==null)"
                                       state="{{form.$pageRight.StartNode}}"
                                       cny
                                       field-name="{{form.$pageLang.Description}}"
                                       fm-model="item.numberc"></fm-number>
                        </td>
                        <td class="auto-style1" style="background-color:#DCE6F1">
                            <fm-text fm-model="item.partName"
                                     readonly
                                     style="background-color:#DCE6F1"
                                     state="{{form.$pageRight.ACRStatus}}"
                                     field-name="{{form.$pageLang.TestBy}}"></fm-text>
                        </td>
                        <td class="auto-style1" style="background-color:#DCE6F1">
                            <fm-text fm-model="item.descritpiton"
                                     readonly
                                     style="background-color:#DCE6F1"
                                     state="{{form.$pageRight.ACRStatus}}"
                                     field-name="{{form.$pageLang.TestBy}}"></fm-text>
                        </td>
                        <td class="auto-style1" style="background-color:#DCE6F1">
                            <fm-text fm-model="item.currency"
                                     readonly
                                     style="background-color:#DCE6F1"
                                     field-name="{{form.$pageLang.Currency}}"></fm-text>
                        </td>
                        <td class="auto-style1" style="background-color:#DCE6F1">
                            <fm-number fm-model="item.price"
                                       readonly
                                       cny
                                       style="background-color:#DCE6F1"
                                       class="input-sm"
                                       field-name="{{form.$pageLang.TestBy}}"></fm-number>
                        </td>
                        <td class="auto-style1" style="background-color:#DCE6F1">
                            <fm-number ng-if="base.pageState==1||(base.pageState==2&&form.$pageRight.StartNode=='normal')"
                                       state="{{form.$pageRight.StartNode}}"
                                       field-name="{{form.$pageLang.Description}}"
                                       class="{{form.changecolor.pricec}}"
                                       cny
                                       change1
                                       fm-model="item.pricec"
                                       fm-blur="form.sum()"></fm-number>
                            <fm-number ng-if="(form.$pageRight.StartNode!='normal'||base.pageState==3)&&(form.pricec!=''&&item.pricec!=null)"
                                       state="{{'readonly'}}"
                                       style="background-color:#FFC000;"
                                       cny
                                       field-name="{{form.$pageLang.Description}}"
                                       fm-model="item.pricec"></fm-number>
                            <fm-number ng-if="(form.$pageRight.StartNode!='normal'||base.pageState==3)&&(item.pricec==''||item.pricec==null)"
                                       state="{{form.$pageRight.StartNode}}"
                                       cny
                                       field-name="{{form.$pageLang.Description}}"
                                       fm-model="item.pricec"></fm-number>
                        </td>
                        <td class="auto-style1" style="background-color:#DCE6F1">
                            <fm-number fm-model="item.pricenet"
                                       readonly
                                       cny
                                       style="background-color:#DCE6F1"
                                       class="input-sm"
                                       field-name="{{form.$pageLang.TestBy}}"></fm-number>
                        </td>
                        <td class="auto-style1" style="background-color:#DCE6F1">
                            <fm-number ng-if="base.pageState==1||(base.pageState==2&&form.$pageRight.StartNode=='normal')"
                                       state="{{form.$pageRight.StartNode}}"
                                       field-name="{{form.$pageLang.Description}}"
                                       class="{{form.changecolor.pricec}}"
                                       cny
                                       change1
                                       fm-model="item.pricenetc"
                                       fm-blur="form.sum()"></fm-number>
                            <fm-number ng-if="(form.$pageRight.StartNode!='normal'||base.pageState==3)&&(form.pricenetc!=''&&item.pricenetc!=null)"
                                       state="{{'readonly'}}"
                                       style="background-color:#FFC000;"
                                       cny
                                       field-name="{{form.$pageLang.Description}}"
                                       fm-model="item.pricenetc"></fm-number>
                            <fm-number ng-if="(form.$pageRight.StartNode!='normal'||base.pageState==3)&&(item.pricenetc==''||item.pricenetc==null)"
                                       state="{{form.$pageRight.StartNode}}"
                                       cny
                                       field-name="{{form.$pageLang.Description}}"
                                       fm-model="item.pricenetc"></fm-number>
                        </td>
                    </tr>
                </tbody>
                <!--      <tfoot>
                          <tr>
                              <td colspan="99" style="text-align:left;">
                                  <table style="width:100%;">
                                      <tr>
                                          <td style="text-align:right;border:0px;">
                                              <input ng-if="base.pageState==1 ||(form.$pageRight.ACRStatus == 'normal'&&base.pageState == 2)" type="button" class="btn btn-sm btn-info" ng-click="form.pur13pu.push({})" value="{{ 'Add' |translate}}" />
                                              <input ng-if="base.pageState==1 ||(form.$pageRight.ACRStatus == 'normal'&&base.pageState == 2)" type="button" class="btn btn-sm btn-danger" ng-click="form.delete()" value="{{ 'Delete' |translate}}" />
                                          </td>
                                      </tr>
                                  </table>
                              </td>
                          </tr>
                      </tfoot>-->
            </table>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--合计(含税)-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Total"></span>
            <div class="col-xs-4">
                <fm-number readonly
                           style="background-color:#DCE6F1"
                           fm-model="form.pur13.total"
                           cny
                           fm-placeholder="{{form.$pageLang.ManualInput}}"></fm-number>
            </div>
            <!--变更后合计(含税)-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.TotalAfter"></span>
            <div class="col-xs-4">
                <fm-number ng-if="base.pageState==1||(base.pageState==2&&form.$pageRight.StartNode=='normal')"
                           state="{{form.$pageRight.StartNode}}"
                           field-name="{{form.$pageLang.Description}}"
                           class="{{form.changecolor.totalAfter}}"
                           cny
                           fm-model="form.pur13.totalAfter"></fm-number>
                <fm-number ng-if="(form.$pageRight.StartNode!='normal'||base.pageState==3)&&(form.pur13.totalAfter!=''&&form.pur13.totalAfter!=null)"
                           state="{{'readonly'}}"
                           style="background-color:#FFC000;"
                           cny
                           field-name="{{form.$pageLang.Description}}"
                           fm-model="form.pur13.totalAfter"></fm-number>
                <fm-number ng-if="(form.$pageRight.StartNode!='normal'||base.pageState==3)&&(form.pur13.totalAfter==''||form.pur13.totalAfter==null)"
                           state="{{form.$pageRight.StartNode}}"
                           cny
                           field-name="{{form.$pageLang.Description}}"
                           fm-model="form.pur13.totalAfter"></fm-number>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--合计(不含税)-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.TotalN"></span>
            <div class="col-xs-4">
                <fm-number readonly
                           style="background-color:#DCE6F1"
                           fm-model="form.pur13.totalN"
                           cny
                           fm-placeholder="{{form.$pageLang.ManualInput}}"></fm-number>
            </div>
            <!--变更后合计(不含税)-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.TotalAfterN"></span>
            <div class="col-xs-4">
                <fm-number ng-if="base.pageState==1||(base.pageState==2&&form.$pageRight.StartNode=='normal')"
                           state="{{form.$pageRight.StartNode}}"
                           field-name="{{form.$pageLang.Description}}"
                           class="{{form.changecolor.totalAfterN}}"
                           cny
                           fm-model="form.pur13.totalAfterN"></fm-number>
                <fm-number ng-if="(form.$pageRight.StartNode!='normal'||base.pageState==3)&&(form.pur13.totalAfterN!=''&&form.pur13.totalAfterN!=null)"
                           state="{{'readonly'}}"
                           style="background-color:#FFC000;"
                           cny
                           field-name="{{form.$pageLang.Description}}"
                           fm-model="form.pur13.totalAfterN"></fm-number>
                <fm-number ng-if="(form.$pageRight.StartNode!='normal'||base.pageState==3)&&(form.pur13.totalAfterN==''||form.pur13.totalAfterN==null)"
                           state="{{form.$pageRight.StartNode}}"
                           cny
                           field-name="{{form.$pageLang.Description}}"
                           fm-model="form.pur13.totalAfterN"></fm-number>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--备注说明-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Remarks"></span>
            <div class="col-xs-10">
                <fm-textarea fm-model="form.pur13.remarks"
                             required
                             fm-placeholder="{{form.$pageLang.ManualInput}}"
                             field-name="{{form.$pageLang.Remarks}}"></fm-textarea>
            </div>
        </div>
    </div>
</div>
<!--其他附件-->
<fm-Group-Head class="print-hide" title="{{ 'Attachment' |translate}}"></fm-Group-Head>
<div class="print-hide row">
    <div class="form-group">
        <div class="col-xs-12">
            <fm-attachment form-files="form.$attachments"
                           link-id="0"
                           task-id='base.taskId'
                           node-id="base.nodeId"
                           draft-id="base.draftId"
                           state="{{form.$pageRight.StartNode}}"
                           field-name="{{'UploadAttachment' |translate}}"
                           fm-model="form.$state.UploadAttachment"
                           button-name="{{ 'UploadAttachment' |translate}}"></fm-attachment>
        </div>
    </div>
</div>