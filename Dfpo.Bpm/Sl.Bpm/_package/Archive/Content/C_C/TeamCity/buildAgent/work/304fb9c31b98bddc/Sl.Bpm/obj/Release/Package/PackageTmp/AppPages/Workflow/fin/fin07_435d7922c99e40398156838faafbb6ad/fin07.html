<!--FIN07.零星费用报销 Created By Lin.Liu-->

<fm-form-title sn-number="{{base.snNumber}}" apply-date="{{base.applyDate}}" sub-title='base.title' fm-model="base.areaCode"></fm-form-title>
<!--申请人信息-->
<fm-Group-Head class="print-hide" title="{{ base.$pageLang.ApplicantInfo }}"></fm-Group-Head>

<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--申请人名字-->
            <span class="col-xs-2 control-label">{{ "ApplicantName" | translate }}</span>
            <div class="col-xs-4">
                <div class="input-group" style="width: 100%;">
                    <span class="form-label">{{base.applicant.userName}}</span>
                    <!--<span class="input-group-btn" ng-if="!taskid">
                        <button class="btn btn-default" type="button" ng-click="base.$selectApplicant()">{{ "Choose" | translate }}</button>
                    </span>-->
                </div>
            </div>
            <!--申请人员工号-->
            <span class="col-xs-2 control-label">{{ "ApplicantEmployeeNumber" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.employeeNumber}}</span></div>
        </div>
    </div>
    <div class="form-group">
        <!--申请人部门线-->
        <div class="col-xs-12">
            <span class="col-xs-2 control-label">{{ "ApplicantDepartment" | translate }}</span>
            <div class="col-xs-10"><span class="form-label">{{base.applicant.departmentName}}</span></div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-xs-12">
            <!--申请人电话-->
            <span class="col-xs-2 control-label">{{ "ApplicantContactNumber" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.contactNumber}}</span></div>
            <!--申请人邮箱-->
            <span class="col-xs-2 control-label">{{ "ApplicantEmail" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.emailAddress}}</span></div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-xs-12">
            <!--申请人手机-->
            <span class="col-xs-2 control-label">{{ "ApplicantMobileNumber" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.mobileNumber}}</span></div>
            <!--申请人直属领导-->
            <span class="col-xs-2 control-label">{{ "ApplicantDirectManager" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.directManagerName}}</span></div>
        </div>
    </div>
</div>

<fm-Group-Head title="{{ base.$pageLang.ApplicationInfo }}"></fm-Group-Head>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--是否暂支-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Advance"></span>
            <div class="col-xs-4">
                <fm-radiolist fm-model="form.fin07.advance"
                              field-name="{{form.$pageLang.Advance}}"
                              dataitem="Common>YesOrNo"
                              fm-code="form.$state.advance"
                              required
                              callback-func="form.changeAdvanceType()"></fm-radiolist>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--预支信息-->
            <span class="col-xs-2 control-label " ng-bind="form.$pageLang.CollectAdvance"></span>
            <div class="col-xs-12" style="padding-left:20px;">
                <a ng-repeat="adv in form.advanceList" ng-href="" style="margin-right:10px;">{{adv.text}}</a>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--收款人姓名-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.NameForPayee"></span>
            <div class="col-xs-4">
                <fm-data-select fm-model="form.fin07.nameForPayee"
                                view="GetAllStaffName"
                                field-name="{{form.$pageLang.NameForPayee}}"
                                required
                                callback-func="form.selectNameForPayee(selectItem)"></fm-data-select>
            </div>
            <!--收款人工号-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.payeeBadgeNo"></span>
            <div class="col-xs-4">
                <fm-text fm-model="form.fin07.payeeBadgeNo"
                         field-name="{{form.$pageLang.payeeBadgeNo}}"
                         readonly></fm-text>
            </div>

        </div>
    </div>
</div>
<div ng-if="form.$state.advance == '2'">
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--报销类型-->
                <span class="col-xs-2 control-label" ng-bind="form.$pageLang.ReimbursementType"></span>
                <div class="col-xs-4">
                    <fm-checklist fm-model="form.fin07.reimbursementType"
                                  field-name="{{form.$pageLang.ReimbursementType}}"
                                  dataitem="Finance>ReimbursementType"
                                  callback-func="form.selectReimbursementType(selectItem,fmModel)"></fm-checklist>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-if="form.$state.advance == '1'">
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--暂支合计-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Amount2"></span>
                <div class="col-xs-4">
                    <fm-number fm-model="form.fin07.amount2"
                               field-name="{{form.$pageLang.Amount2}}"
                               cny
                               required
                               callback-func="form.sum()"></fm-number>
                </div>
                <!--币种-->
                <span class="col-xs-2 control-label" ng-bind="form.$pageLang.Currency"></span>
                <div class="col-xs-4">
                    <fm-text fm-model="form.fin07.currency2"
                             readonly></fm-text>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--汇率-->
                <span class="col-xs-2 control-label" ng-bind="form.$pageLang.ExchangeRate"></span>
                <div class="col-xs-4">
                    <fm-text fm-model="form.fin07.exchangeRate2"
                             readonly></fm-text>
                </div>
                <!--预计关闭时间-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.EstimatedClosingTime"></span>
                <div class="col-xs-4">
                    <fm-datetime fm-model="form.fin07.estimatedClosingTime"
                                 field-name="{{form.$pageLang.EstimatedClosingTime}}"
                                 date
                                 required></fm-datetime>
                </div>

            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--暂支用途描述-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.PurposeDescription2"></span>
                <div class="col-xs-10">
                    <fm-textarea fm-model="form.fin07.purposeDescription2"
                                 required
                                 field-name="{{form.$pageLang.PurposeDescription2}}"></fm-textarea>
                </div>
            </div>
        </div>
    </div>
</div>

<div ng-if="form.$state.advance == '2'">
    <!--课程有关信息-->
    <fm-Group-Head title="{{ form.$pageLang.CourseInformation }}"></fm-Group-Head>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!-- 是否课程报销-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.RefundTrainingFees"></span>
                <div class="col-xs-4">
                    <fm-radiolist fm-model="form.fin07.refundTrainingFees"
                                  field-name="{{form.$pageLang.RefundTrainingFees}}"
                                  fm-code="form.$state.refundTrainingFees"
                                  dataitem="Common>YesOrNo"
                                  required
                                  callback-func="form.changeReFundTrainingFeesType()"></fm-radiolist>
                </div>
                <div ng-if="form.$state.refundTrainingFees == '1'">
                    <!--您请选择的ExternalCourse表单单号为：-->
                    <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Numbers"></span>
                    <div class="col-xs-4">
                        <fm-data-select href="/SysPages/SnNumber/{text}/"
                                        default-model="form.fin07.externalCourseFlowNum"
                                        callback-func="form.selectExternalCourse(selectItem)"
                                        view="GetExternalCourse"
                                        filter="{areaCode: base.areaCode,applicantJobId: base.jobId}"
                                        required
                                        fm-model="form.fin07.externalCourseFlowNum"
                                        field-name="{{form.$pageLang.Numbers}}"></fm-data-select>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div ng-if="form.$state.refundTrainingFees == '1'">
        <div class="row">
            <div class="form-group">
                <div class="col-xs-12">
                    <span class="tip-text">请附上毕业或结业证明或成绩单的复印件以及有关收据和课程评估表</span>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="print-hide row">
                <div class="form-group">
                    <div class="col-xs-12">
                        <span class="col-xs-2 control-label required">培训评估表上传</span>
                        <div class="col-xs-4">
                            <fm-attachment form-files="form.$attachments"
                                           link-id="0"
                                           task-id='base.taskId'
                                           node-id="base.nodeId"
                                           draft-id="base.draftId"
                                           field-name="{{'UploadAttachment' |translate}}"
                                           fm-model="form.$state.UploadAttachment"
                                           button-name="{{ 'UploadAttachment' |translate}}"
                                           required></fm-attachment>
                        </div>
                        <span class="col-xs-2 control-label">培训证书上传</span>
                        <div class="col-xs-4">
                            <fm-attachment form-files="form.$attachments"
                                           link-id="1"
                                           task-id='base.taskId'
                                           node-id="base.nodeId"
                                           draft-id="base.draftId"
                                           field-name="{{'UploadAttachment' |translate}}"
                                           fm-model="form.$state.UploadAttachment"
                                           button-name="{{ 'UploadAttachment' |translate}}"></fm-attachment>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="row">
            <div class="form-group">
                <div class="col-xs-12">
                    <!--学校名称-->
                    <span class="col-xs-2 control-label" ng-bind="form.$pageLang.SchoolName"></span>
                    <div class="col-xs-4">
                        <fm-text fm-model="form.fin07.schoolName"
                                 readonly></fm-text>
                    </div>
                    <!--课程名称-->
                    <span class="col-xs-2 control-label" ng-bind="form.$pageLang.CourseName"></span>
                    <div class="col-xs-4">
                        <fm-text fm-model="form.fin07.courseName"
                                 readonly></fm-text>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group">
                <div class="col-xs-12">
                    <!--起始日期-->
                    <span class="col-xs-2 control-label " ng-bind="form.$pageLang.StartDate"></span>
                    <div class="col-xs-4">
                        <fm-datetime fm-model="form.fin07.startDate"
                                     date
                                     required
                                     readonly></fm-datetime>
                    </div>
                    <!--结束日期-->
                    <span class="col-xs-2 control-label" ng-bind="form.$pageLang.EndDate"></span>
                    <div class="col-xs-4">
                        <fm-datetime fm-model="form.fin07.endDate"
                                     date
                                     readonly></fm-datetime>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group">
                <div class="col-xs-12">
                    <!--总学时-->
                    <span class="col-xs-2 control-label" ng-bind="form.$pageLang.CreditHours"></span>
                    <div class="col-xs-4">
                        <fm-text fm-model="form.fin07.creditHours"
                                 readonly></fm-text>
                    </div>
                    <!--申请报销数额(不含差旅费)-->
                    <span class="col-xs-2 control-label" ng-bind="form.$pageLang.Claimed"></span>
                    <div class="col-xs-4">
                        <fm-text fm-model="form.fin07.amountClaimed"
                                 required
                                 readonly></fm-text>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <!--发票明细-->
    <fm-Group-Head title="{{ form.$pageLang.InvoiceDetail }}"></fm-Group-Head>
    <div class="row">
        <div class="col-xs-12">
            <table class="table table-bordered table-detail">
                <thead>
                    <tr>
                        <th ng-if="base.pageState==1" class="checktd"><input type="checkbox" class="uniform" ng-checked="form.fin07invoiceAllChecked" ng-model="form.fin07invoiceAllChecked" ng-click="form.$checkAll(form.fin07invoiceAllChecked, form.fin07invoice)" /></th> <!--标记-->
                        <th style="width: 40px;text-align:center;" ng-bind="form.$pageLang.No"></th> <!--序列-->
                        <th style="width: 46%;text-align:center;" class="required" ng-bind="form.$pageLang.InvoiceNo"></th> <!--发票号码-->
                        <th style="text-align:center;" class="required" ng-bind="form.$pageLang.InvoiceAmount"></th> <!--发票金额-->
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in form.fin07invoice" ng-class="{ 'active': item.checked}" detail-name="{{form.$pageLang.ApplicationInfo}}">
                        <td ng-if="base.pageState==1" class="checktd">
                            <input class="uniform" type="checkbox" ng-model="item.checked" />
                        </td>
                        <td>
                            <fm-number ng-if="item.gridOrder!=null"
                                       fm-model="item.gridOrder"></fm-number>
                            <span ng-if="item.gridOrder == null">{{$index + 1}}</span>
                        </td>
                        <td>
                            <fm-text field-name="{{form.$pageLang.InvoiceNo}}"
                                     required
                                     fm-model="item.invoiceNo"></fm-text>
                        </td>
                        <td>
                            <fm-number cny
                                       required
                                       field-name="{{form.$pageLang.InvoiceAmount}}"
                                       fm-model="item.invoiceAmount"
                                       callback-func="form.sum()"></fm-number>
                        </td>
                    </tr>
                </tbody>
                <tfoot ng-if="base.pageState==1">
                    <tr>
                        <td colspan="99" style="text-align: right;">
                            <input type="button" class="btn btn-sm btn-info" ng-click="form.fin07invoice.push({})" value="{{form.$pageLang.Add}}" />
                            <input type="button" class="btn btn-sm btn-danger" ng-click="form.deleteInvoice()" value="{{form.$pageLang.Delete}}" />
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>

    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!-- 报销合计-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Amount"></span>
                <div class="col-xs-2">
                    <fm-number fm-model="form.fin07.amount1"
                               cny
                               readonly></fm-number>
                </div>
                <!--币种-->
                <span class="col-xs-2 control-label" ng-bind="form.$pageLang.Currency"></span>
                <div class="col-xs-2">
                    <fm-text fm-model="form.fin07.currency1"
                             readonly></fm-text>
                </div>
                <!--汇率-->
                <span class="col-xs-2 control-label" ng-bind="form.$pageLang.ExchangeRate"></span>
                <div class="col-xs-2">
                    <fm-text fm-model="form.fin07.exchangeRate1"
                             readonly></fm-text>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!-- 非交通费用途描述（若是培训费用请做出详述）-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.PurposeDescription"></span>
                <div class="col-xs-10">
                    <fm-textarea fm-model="form.fin07.purposeDescription1"
                                 required
                                 field-name="{{form.$pageLang.PurposeDescription}}"></fm-textarea>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <div class="col-xs-10">
                    <p>Note：</p>
                    <p>* 非交通费用途描述中应按费用类别、费用发生日期(时间段)详细注明费用发生的情况。</p>
                    <p>* 发票需按类型、金额整齐、整洁装订(粘贴)在A4纸上(同一发票类型尽量装订在一起)，并将整理好的发票按时交于财务部。</p>
                </div>
            </div>
        </div>
    </div>
    <div ng-if="(form.fin07.reimbursementType || '').indexOf('165cc891-0c3a-472a-8b71-b9fee07c3d06') >= 0">
        <!--交通费报销明细-->
        <fm-Group-Head title="{{ form.$pageLang.Traffic }}"></fm-Group-Head>
        <div class="row">
            <div class="form-group">
                <div class="col-xs-12">
                    <!-- 是否加班-->
                    <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Overtime"></span>
                    <div class="col-xs-4">
                        <fm-radiolist fm-model="form.fin07.overtime"
                                      dataitem="Common>YesOrNo"
                                      fm-code="form.$state.overtime"
                                      required
                                      field-name="{{form.$pageLang.Overtime}}"></fm-radiolist>

                    </div>
                </div>
            </div>
        </div>
        <!--交通费报销明细-->
        <div class="row">
            <div class="col-xs-12">
                <table class="table table-bordered table-detail">
                    <thead>
                        <tr>
                            <th ng-if="base.pageState==1" class="checktd"><input type="checkbox" class="uniform" ng-checked="form.fin07overtimeAllChecked" ng-model="form.fin07overtimeAllChecked" ng-click="form.$checkAll(form.fin07overtimeAllChecked, form.fin07overtime)" /></th> <!--标记-->
                            <th style="width: 40px;text-align:center;" ng-bind="form.$pageLang.No"></th> <!--序列-->
                            <th style="width: 13%;text-align:center;" class="required" ng-bind="form.$pageLang.Date"></th> <!--日期-->
                            <th style="width: 13%;text-align:center;" class="required" ng-bind="form.$pageLang.BeginningTime"></th> <!--上车时间-->
                            <th style="width: 13%;text-align:center;" class="required" ng-bind="form.$pageLang.EndingTime"></th> <!--下车时间-->
                            <th style="width: 13%;text-align:center;" class="required" ng-bind="form.$pageLang.BeginningLocation"></th> <!--上车地点-->
                            <th style="width: 13%;text-align:center;" class="required" ng-bind="form.$pageLang.EndingLocation"></th> <!--下车地点-->
                            <th style="width: 13%;text-align:center;" class="required" ng-bind="form.$pageLang.Purpose"></th> <!--目的-->
                            <th style="text-align:center;" class="required" ng-bind="form.$pageLang.Amount"></th> <!--金额-->
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in form.fin07overtime" ng-class="{ 'active': item.checked}" detail-name="{{form.$pageLang.ApplicationInfo}}">
                            <td ng-if="base.pageState==1" class="checktd">
                                <input class="uniform" type="checkbox" ng-model="item.checked" />
                            </td>
                            <td>
                                <fm-number ng-if="item.gridOrder!=null"
                                           fm-model="item.gridOrder"></fm-number>
                                <span ng-if="item.gridOrder == null">{{$index + 1}}</span>
                            </td>
                            <td>
                                <fm-datetime date
                                             fm-model="item.otDate"
                                             required
                                             field-name="{{form.$pageLang.Date}}"></fm-datetime>
                            </td>
                            <td>
                                <fm-datetime required
                                             datetime
                                             field-name="{{form.$pageLang.BeginningTime}}"
                                             fm-model="item.beginTime"></fm-datetime>
                            </td>
                            <td>
                                <fm-datetime required
                                             datetime
                                             field-name="{{form.$pageLang.EndingTime}}"
                                             fm-model="item.endTime"></fm-datetime>
                            </td>
                            <td>
                                <fm-text required
                                         field-name="{{form.$pageLang.BeginningLocation}}"
                                         fm-model="item.beginLocation"></fm-text>
                            </td>
                            <td>
                                <fm-text required
                                         field-name="{{form.$pageLang.EndingLocation}}"
                                         fm-model="item.endLocation"></fm-text>
                            </td>
                            <td>
                                <fm-text required
                                         field-name="{{form.$pageLang.Purpose}}"
                                         fm-model="item.purpose"></fm-text>
                            </td>
                            <td>
                                <fm-number cny
                                           required
                                           field-name="{{form.$pageLang.Amount}}"
                                           fm-model="item.amount"
                                           callback-func="form.sum()"></fm-number>
                            </td>
                        </tr>
                    </tbody>
                    <tfoot ng-if="base.pageState==1">
                        <tr>
                            <td colspan="99" style="text-align: right;">
                                <input type="button" class="btn btn-sm btn-info" ng-click="form.fin07overtime.push({})" value="{{form.$pageLang.Add}}" />
                                <input type="button" class="btn btn-sm btn-danger" ng-click="form.deleteOvertime()" value="{{form.$pageLang.Delete}}" />
                            </td>
                        </tr>
                    </tfoot>
                </table>
                <!--交通费小计-->
                <div class="col-xs-12">
                    <div class="col-xs-8">
                    </div>
                    <span class="col-xs-2 control-label" ng-bind="form.$pageLang.Total"></span>
                    <div class="col-xs-2">
                        <fm-number cny
                                   readonly
                                   fm-model="form.fin07.total1"></fm-number>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <fm-Group-Head title="{{ form.$pageLang.Transportation}}"></fm-Group-Head>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!-- 是否是项目-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.IsChooseProject"></span>
                <div class="col-xs-4">
                    <fm-radiolist fm-model="form.fin07.project"
                                  dataitem="Common>YesOrNo"
                                  fm-code="form.$state.project"
                                  required
                                  field-name="{{form.$pageLang.Project}}"
                                  callback-func="form.changeProjectType()"></fm-radiolist>
                </div>
            </div>
        </div>
    </div>
    <div ng-if="form.$state.project == '1'">
        <div class="row">
            <div class="col-xs-12">
                <table class="table table-bordered table-detail">
                    <thead>
                        <tr>
                            <th ng-if="base.pageState==1" class="checktd"><input type="checkbox" class="uniform" ng-checked="form.fin07projAllChecked" ng-model="form.fin07projAllChecked" ng-click="form.$checkAll(form.fin07projAllChecked, form.fin07proj)" /></th> <!--标记-->
                            <th style="width: 40px;" ng-bind="form.$pageLang.No"></th> <!--序号-->
                            <th style="width: 19%;text-align:center;" class="required" ng-bind="form.$pageLang.ProjectName"></th> <!--项目名称-->
                            <th style="width: 19%;text-align:center;" class="required" ng-bind="form.$pageLang.ProjectCode"></th> <!--项目编号-->
                            <th style="width: 19%;text-align:center;" class="required" ng-bind="form.$pageLang.BudgetItemsSelection"></th> <!--预算项目类别-->
                            <th style="width: 19%;text-align:center;" class="required" ng-bind="form.$pageLang.Amount"></th> <!--金额-->
                            <th style="text-align:center;" class="required" ng-bind="form.$pageLang.ProgramManager"></th> <!--项目经理-->
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in form.fin07proj" ng-class="{ 'active': item.checked}" detail-name="{{form.$pageLang.ApplicationInfo}}">
                            <td ng-if="base.pageState==1" class="checktd">
                                <input class="uniform" type="checkbox" ng-model="item.checked" />
                            </td>
                            <td>
                                <fm-number ng-if="item.gridOrder!=null"
                                           fm-model="item.gridOrder"></fm-number>
                                <span ng-if="item.gridOrder == null">{{$index + 1}}</span>
                            </td>
                            <td>
                                <fm-data-select field-name="{{form.$pageLang.ProjectDesc}}"
                                                view="GetProjectItemInfo"
                                                size="lg"
                                                required
                                                fm-model="item.projectDesc"
                                                fm-blur="form.selectProjectInfo(item,selectItem)"></fm-data-select>
                            </td>
                            <td>
                                <fm-text field-name="{{form.$pageLang.ProjectNo}}"
                                         readonly
                                         fm-model="item.projectNo"></fm-text>
                            </td>
                            <td>
                                <fm-text field-name="{{form.$pageLang.BudgetItemsSelection}}"
                                         readonly
                                         fm-model="item.projectItem"></fm-text>
                            </td>
                            <td>
                                <fm-number cny
                                           required
                                           field-name="{{form.$pageLang.InvoiceAmount}}"
                                           fm-model="item.amount"
                                           callback-func="form.sum()"></fm-number>
                            </td>
                            <td>
                                <fm-text field-name="{{form.$pageLang.ProjectMgr}}"
                                         readonly
                                         fm-model="item.projectMgr"></fm-text>
                            </td>
                        </tr>
                    </tbody>
                    <tfoot ng-if="base.pageState==1">
                        <tr>
                            <td colspan="99" style="text-align: right;">
                                <input type="button" class="btn btn-sm btn-info" ng-click="form.fin07proj.push({})" value="{{form.$pageLang.Add}}" />
                                <input type="button" class="btn btn-sm btn-danger" ng-click="form.deleteProj()" value="{{form.$pageLang.Delete}}" />
                            </td>
                        </tr>
                    </tfoot>
                </table>
                <div class="fm-table-footer">
                    <div class="row">
                        <!--税额-->
                        <span class="col-xs-3 col-xs-offset-6 control-label" ng-bind="form.$pageLang.Adjustment"></span>
                        <div class="col-xs-3">
                            <fm-number cny
                                       fm-model="form.fin07.projectAdjustment"
                                       callback-func="form.sum()"></fm-number>
                        </div>
                    </div>
                    <div class="row">
                        <!--总计-->
                        <span class="col-xs-3 col-xs-offset-6 control-label" ng-bind="form.$pageLang.Total1"></span>
                        <div class="col-xs-3">
                            <fm-number cny
                                       readonly
                                       fm-model="form.fin07.projectTotal"></fm-number>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="form-group">
                <div class="col-xs-12">
                    <!--描述-->
                    <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Description"></span>
                    <div class="col-xs-10">
                        <fm-textarea fm-model="form.fin07.projectDescription"
                                     required
                                     field-name="{{form.$pageLang.Instruction}}"></fm-textarea>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-xs-12">
            <table class="table table-bordered table-detail">
                <thead>
                    <tr>
                        <th ng-if="base.pageState==1" class="checktd"><input type="checkbox" class="uniform" ng-checked="form.fin07costcenterAllChecked" ng-model="form.fin07costcenterAllChecked" ng-click="form.$checkAll(form.fin07costcenterAllChecked, form.fin07costcenter)" /></th> <!--标记-->
                        <th style="width: 40px;" ng-bind="form.$pageLang.No"></th> <!--序号-->
                        <th style="width: 19%;text-align:center;" class="required" ng-bind="form.$pageLang.CostCenter"></th> <!--成本中心-->
                        <th style="width: 19%;text-align:center;" class="required" ng-bind="form.$pageLang.ExpenseType"></th> <!--费用类别-->
                        <th style="width: 19%;text-align:center;" class="required" ng-bind="form.$pageLang.Account"></th> <!--A/C-->
                        <th style="width: 19%;text-align:center;" class="required" ng-bind="form.$pageLang.Amount"></th> <!--金额-->
                        <th style="text-align:center;" class="required" ng-bind="form.$pageLang.ApprovedBy"></th> <!--审批人-->
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in form.fin07costcenter" ng-class="{ 'active': item.checked}" detail-name="{{form.$pageLang.ApplicationInfo}}">
                        <td ng-if="base.pageState==1" class="checktd">
                            <input class="uniform" type="checkbox" ng-model="item.checked" />
                        </td>
                        <td>
                            <fm-number ng-if="item.gridOrder!=null"
                                       fm-model="item.gridOrder"></fm-number>
                            <span ng-if="item.gridOrder == null">{{$index + 1}}</span>
                        </td>
                        <td>
                            <fm-data-select field-name="{{form.$pageLang.CostCenter}}"
                                            view="GetCostCenterByRefundTrainingFeesType"
                                            required
                                            filter="{refundTrainingFees: form.fin07.refundTrainingFees}"
                                            fm-model="item.costCenter"
                                            fm-blur="form.selectCostCenter(item,selectItem)"></fm-data-select>
                        </td>
                        <td>
                            <fm-text field-name="{{form.$pageLang.ExpenseType}}"
                                     readonly
                                     fm-model="item.expenseType"></fm-text>
                        </td>
                        <td>
                            <fm-text field-name="{{form.$pageLang.Account}}"
                                     readonly
                                     fm-model="item.account"></fm-text>
                        </td>
                        <td>
                            <fm-number cny
                                       required
                                       field-name="{{form.$pageLang.Amount}}"
                                       fm-model="item.amount"
                                       callback-func="form.sum()"></fm-number>
                        </td>
                        <td>
                            <fm-text field-name="{{form.$pageLang.ApprovedBy}}"
                                     readonly
                                     fm-model="item.ownerMgr"></fm-text>
                        </td>
                        <div ng-if="false">
                            <fm-text fm-model="item.ownerMgrJob"></fm-text>
                            <fm-text fm-model="item.costGroupId"></fm-text>
                        </div>
                    </tr>
                </tbody>
                <tfoot ng-if="base.pageState==1">
                    <tr>
                        <td colspan="99" style="text-align: right;">
                            <input type="button" class="btn btn-sm btn-info" ng-click="form.fin07costcenter.push({})" value="{{form.$pageLang.Add}}" />
                            <input type="button" class="btn btn-sm btn-danger" ng-click="form.deleteCostcenter()" value="{{form.$pageLang.Delete}}" />
                        </td>
                    </tr>
                </tfoot>
            </table>
            <div class="fm-table-footer">
                <div class="row">
                    <!--税额-->
                    <span class="col-xs-3 col-xs-offset-6 control-label" ng-bind="form.$pageLang.Adjustment"></span>
                    <div class="col-xs-3">
                        <fm-number cny
                                   fm-model="form.fin07.costAdjustment"
                                   callback-func="form.sum()"></fm-number>
                    </div>
                </div>
                <div class="row">
                    <!--总计-->
                    <span class="col-xs-3 col-xs-offset-6 control-label" ng-bind="form.$pageLang.Total1"></span>
                    <div class="col-xs-3">
                        <fm-number cny
                                   readonly
                                   fm-model="form.fin07.costTotal"></fm-number>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--描述-->
                <span class="col-xs-2 control-label" ng-bind="form.$pageLang.Description"></span>
                <div class="col-xs-10">
                    <fm-textarea fm-model="form.fin07.costDescription"
                                 field-name="{{form.$pageLang.Instruction}}"></fm-textarea>
                </div>
            </div>
        </div>
    </div>
</div>
<!--合计信息-->
<fm-Group-Head title="{{ form.$pageLang.TotalInformation}}"></fm-Group-Head>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--金额-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.SumofAmount"></span>
            <div class="col-xs-4">
                <fm-number fm-model="form.fin07.theSumOfAmount"
                           readonly
                           cny></fm-number>
            </div>
            <!--大写-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.SumAll"></span>
            <div class="col-xs-4">
                <fm-text fm-model="form.fin07.sumAll"
                         readonly></fm-text>
            </div>
        </div>
    </div>
</div>
<div ng-if="form.$state.advance == '2'">
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--暂支凭证号-->
                <span class="col-xs-2 control-label" ng-bind="form.$pageLang.Voucher"></span>
                <div class="col-xs-4">
                    <fm-data-select href="/SysPages/SnNumber/{text}/"
                                    default-model="form.fin07.advanceNumber"
                                    callback-func="form.selectAdvanceNumber(selectItem)"
                                    fm-model="form.fin07.advanceNumber"
                                    view="GetAdvanceAmountInPettyCash"
                                    filter="{payee: form.fin07.payeeUserId}"
                                    field-name="{{form.$pageLang.Voucher}}"></fm-data-select>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--扣减原已暂支现金-->
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.advanced"></span>
                <div class="col-xs-4">
                    <fm-number fm-model="form.fin07.lessTheCashAdvanced"
                               cny
                               readonly></fm-number>
                </div>
                <!--币种-->
                <span class="col-xs-2 control-label" ng-bind="form.$pageLang.Currency"></span>
                <div class="col-xs-4">
                    <fm-text readonly
                             fm-model="form.fin07.currency"></fm-text>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--需支付金额-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.SumofAmount1"></span>
            <div class="col-xs-4">
                <fm-number fm-model="form.fin07.mustPay"
                           readonly
                           cny></fm-number>
            </div>
            <!--大写-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.SumAll"></span>
            <div class="col-xs-4">
                <fm-text fm-model="form.fin07.mustPaySumAll"
                         readonly></fm-text>
            </div>
        </div>
    </div>
</div>

<div ng-if="form.$pageRight.ShowPayer == 'normal'">
    <div class="row">
        <div class="col-xs-12">
            <table class="table table-bordered table-detail">
                <thead>
                    <tr>
                        <th ng-if="base.pageState==2" class="checktd"><input type="checkbox" class="uniform" ng-checked="form.fin07payAllChecked" ng-model="form.fin07payAllChecked" ng-click="form.$checkAll(form.fin07payAllChecked, form.fin07pay)" /></th> <!--标记-->
                        <th style="width: 40px;" ng-bind="form.$pageLang.No"></th> <!--序号-->
                        <th style="width: 24%;text-align:center;" ng-bind="form.$pageLang.Payer"></th> <!--付款人-->
                        <th style="width: 24%;text-align:center;" ng-bind="form.$pageLang.PayDate"></th> <!--付款日期-->
                        <th style="width: 24%;text-align:center;" ng-bind="form.$pageLang.PayAmount"></th> <!--付款金额-->
                        <th style="text-align:center;" ng-bind="form.$pageLang.PayBank"></th> <!--付款银行-->
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in form.fin07pay" ng-class="{ 'active': item.checked}" detail-name="{{form.$pageLang.ApplicationInfo}}">
                        <td ng-if="base.pageState==2" class="checktd">
                            <input class="uniform" type="checkbox" ng-model="item.checked" />
                        </td>
                        <td>
                            <fm-number ng-if="item.gridOrder!=null"
                                       fm-model="item.gridOrder"></fm-number>
                            <span ng-if="item.gridOrder == null">{{$index + 1}}</span>
                        </td>
                        <td>
                            <fm-text field-name="{{form.$pageLang.Payer}}"
                                     fm-model="item.payer"
                                     fm-normal="form.$pageRight.ShowPayer"></fm-text>
                        </td>
                        <td>
                            <fm-datetime field-name="{{form.$pageLang.PayDate}}"
                                         date
                                         fm-model="item.payDate"
                                         fm-normal="form.$pageRight.ShowPayer"></fm-datetime>
                        </td>
                        <td>
                            <fm-number cny
                                       field-name="{{form.$pageLang.PayAmount}}"
                                       fm-model="item.payAmount"
                                       callback-func="form.sum()"
                                       fm-normal="form.$pageRight.ShowPayer"></fm-number>
                        </td>
                        <td>
                            <fm-text field-name="{{form.$pageLang.PayBank}}"
                                     fm-model="item.payBank"
                                     fm-normal="form.$pageRight.ShowPayer"></fm-text>
                        </td>
                    </tr>
                </tbody>
                <tfoot ng-if="base.pageState==2">
                    <tr>
                        <td colspan="99" style="text-align: right;">
                            <input type="button" class="btn btn-sm btn-info" ng-click="form.fin07pay.push({})" value="{{form.$pageLang.Add}}" />
                            <input type="button" class="btn btn-sm btn-danger" ng-click="form.deletePay()" value="{{form.$pageLang.Delete}}" />
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--收款人签字-->
            <span class="col-xs-2 control-label " ng-bind="form.$pageLang.ReveivedBy"></span>
            <div class="col-xs-4">
                <fm-text fm-model="form.fin07.reveivedBy"
                         readonly></fm-text>
            </div>
            <!--日期-->
            <span class="col-xs-2 control-label " ng-bind="form.$pageLang.Date"></span>
            <div class="col-xs-4">
                <fm-text fm-model="form.fin07.reveivedDate"
                         readonly></fm-text>
            </div>
        </div>
    </div>
</div>





