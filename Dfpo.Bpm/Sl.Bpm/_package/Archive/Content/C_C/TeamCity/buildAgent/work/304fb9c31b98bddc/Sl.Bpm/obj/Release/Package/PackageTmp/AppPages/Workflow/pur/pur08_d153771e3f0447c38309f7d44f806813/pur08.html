<!--量产订购申请-->
<fm-form-title sn-number="{{base.snNumber}}" apply-date="{{base.applyDate}}" sub-title='base.title' fm-model="base.areaCode" ></fm-form-title>


<fm-Group-Head title="{{ base.$pageLang.ApplicantInfo }}"></fm-Group-Head>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--申请人名字-->
            <span class="col-xs-2 control-label">{{ "ApplicantName" | translate }}</span>
            <div class="col-xs-4">
                <div class="input-group" style="width: 100%;">
                    <span class="form-label">{{base.applicant.userName}}</span>
                  <!--  <span class="input-group-btn" ng-if="!taskid">
                        <button class="btn btn-default" type="button" ng-click="base.$selectApplicant()">{{ "Choose" | translate }}</button>
                    </span>-->
                </div>
            </div>
            <!--申请人员工号-->
            <span class="col-xs-2 control-label">{{ "ApplicantEmployeeNumber" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.employeeNumber}}</span></div>
        </div>
    </div>
    <div class="form-group">
        <!--申请人部门线-->
        <div class="col-xs-12">
            <span class="col-xs-2 control-label">{{ "ApplicantDepartment" | translate }}</span>
            <div class="col-xs-10"><span class="form-label">{{base.applicant.departmentName}}</span></div>
        </div>
    </div>
    <div class="form-group">
        <div class="col-xs-12">
            <!--申请人手机-->
            <span class="col-xs-2 control-label">{{ "ApplicantMobileNumber" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.mobileNumber}}</span></div>
            <!--申请人电话-->
            <span class="col-xs-2 control-label">{{ "ApplicantContactNumber" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.contactNumber}}</span></div>

        </div>
    </div>
    <div class="form-group">
        <div class="col-xs-12">
            <!--申请人邮箱-->
            <span class="col-xs-2 control-label">{{ "ApplicantEmail" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.emailAddress}}</span></div>
            <!--申请人直属领导-->
            <span class="col-xs-2 control-label">{{ "ApplicantDirectManager" | translate }}</span>
            <div class="col-xs-4"><span class="form-label">{{base.applicant.directManagerName}}</span></div>
        </div>
    </div>
</div>

<fm-Group-Head title="{{form.$pageLang.ProductionorderApplicantInfo }}"></fm-Group-Head>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--项目代码-->
            <span class="col-xs-2 control-label" ng-class="{'required': form.projectNumbers}" ng-bind="form.$pageLang.ProjectCode"></span>
            <div class="col-xs-4">
                <div class="col-xs-8" ng-if="!form.projectNumbers" style="padding-left: 0px;">
                    <fm-data-select view="GetAllProjectName"
                                    callback-func="form.getProjectName(selectItem)"
                                    fm-model="form.pur08.projectCode"
                                    field-name="{{form.$pageLang.ProjectCode}}"></fm-data-select>
                </div>
                <div class="col-xs-8" ng-if="form.projectNumbers" style="padding-left: 0px;">
                    <fm-datatext-select view="GetAllProjectName"
                        fm-text-model="form.pur08.projectCodeText"
                        required
                        size="lg"
                        callback-func="form.getProjectName(selectItem)"
                        fm-model="form.pur08.projectCode"
                        field-name="{{form.$pageLang.ProjectCode}}"
                        placeholder="可以手输" i-clear></fm-datatext-select>
                </div>
                <div class="col-xs-4" ng-if="base.pageState===1">
                    <input id="cleanout"  class="btn btn-sm btn-danger" type="button" value="清空" ng-click="form.calar()"/>
                    <input id="blank" class="btn btn-sm btn-danger ng-hide" type="button" value="blank" ng-click="form.projectGetIFuc()"/>
                </div>
            </div>
             
            <!--采购员-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Buyer"></span>
            <div class="col-xs-4">
               <fm-text 
                            fm-model="form.pur08.buyer" 
                            field-name="{{form.$pageLang.Buyer}}"
                           readonly
                           ></fm-text>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--项目名称-->
            <span class="col-xs-2 control-label" ng-class="{'required': form.projectNumbers}" ng-bind="form.$pageLang.ProjectName"></span>
            <div class="col-xs-4">
                 <div ng-if="!form.projectNumbers">
                    <fm-text fm-model="form.pur08.projectName"
                       fm-readonly="!form.projectNumbers"></fm-text>
            </div>
                <div ng-if="form.projectNumbers">
                    <fm-text fm-model="form.pur08.projectName"
                             field-name="{{form.$pageLang.ProjectCode}}"
                             required
                             i-clear></fm-text>
                </div>
            </div>
            <!--量产时间-->
            <span class="col-xs-2 control-label" ng-bind="form.$pageLang.WorkSop"></span>
            <div class="col-xs-4">
                <fm-datetime 
                             date
                             fm-model="form.pur08.workSopTime"></fm-datetime>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--业务范围-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Scopeofbusiness"></span>
            <div class="col-xs-4">
                <fm-select fm-model="form.pur08.businessRange"
                           dataitem="PurchaseRelated>ScheduleOrder>BusinessArea"
                           required
                           field-name="{{form.$pageLang.Scopeofbusiness}}"
                          ></fm-select>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-xs-12">
        <table class="table table-bordered table-detail">
            
            <thead>
                <tr>
                    <th style="text-align:center;"  class="checktd"   ng-if="base.pageState==1">

                            <input type="checkbox" class="uniform"   style="padding-left: 0px;width:50px;"
                               ng-checked="form.pur08sAllChecked" 
                               ng-model="form.pur08sAllChecked" 
                               ng-click="form.$checkAll(form.pur08sAllChecked, form.pur08s)" /> 
               <!--         <strong class="input-sm" ng-if="(base.pageState!=1 &&form.$pageRight.StartNode!='normal' )||base.pageState==3"> 标记</strong>-->
                    </th> <!--标记-->
                    <th ng-bind="form.$pageLang.Mark">
            
                    </th>
                    <th style="width:50px;text-align:center; "  ng-bind="form.$pageLang.No"></th> <!--序列-->
                    <th style="width:200px;text-align:center; "  class="required" ng-bind="form.$pageLang.Supplier"></th> <!--供应商-->
                    <th style="width:100px;text-align:center; " class="required"  ng-bind="form.$pageLang.SupplierCode"></th> <!--供应商编号-->
                    <th style="width:200px;text-align:center;" class="required"  ng-bind="form.$pageLang.PartNumber"></th> <!--品号-->
                    <th style="width:200px;text-align:center;"  ng-bind="form.$pageLang.PartDescription"></th> <!--品名描述-->
                    <th style="width:80px;text-align:center; " class="required"   ng-bind="form.$pageLang.Currency"></th> <!--币种-->
                    <th style="width:100px;text-align:center;" class="required"  ng-bind="form.$pageLang.UnitPrice"></th> <!--单价-->
                    <th style="width:100px;text-align:center;"  class="required"  ng-bind="form.$pageLang.LeadTime"></th> <!--交期(周)-->
                    <th style="width:100px;text-align:center;"  class="required"  ng-bind="form.$pageLang.Mpq"> </th> <!--最小包装-->
                    <th style="width:100px;text-align:center;" ng-bind="form.$pageLang.Moq"></th> <!--最小订购量-->
                    <th style="width:100px;text-align:center;" ng-bind="form.$pageLang.ToolLing" ></th> <!--模具费用-->
                    <th style="width:100px;text-align:center;" ng-bind="form.$pageLang.OpenModle"  ng-if="base.areaCode==='YFVSJ'"></th> <!--修模或新开模-->
      
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in form.pur08s"  ng-class="{'active': item.checked}" detail-name="{{form.$pageLang.BusinessEntertainmentExpensesReimbursementList}}">
                    <td class="checktd"  ng-if="base.pageState==1">
                        <input class="uniform"
                               type="checkbox" ng-model="item.checked" name="selected"/>
                    </td>
                    <td>
                        {{item.checked==='true'||item.checked===true?"Y":"N"}}
                    </td>
                    <td>
                        <strong class="input-sm">{{ $index + 1}}</strong>
                    </td>
                    <td>
                        <fm-text class="input-sm"
                            fm-model="item.supplier"
                            readonly
                            field-name="{{form.$pageLang.Supplier}}"
                            required></fm-text>
                    </td>
                    <td>
                        <fm-data-select
                            fm-model="item.supplierCode"
                            view="GetAllSupplierByCodeAndName"
                            field-name="{{form.$pageLang.SupplierCode}}"
                            callback-func="form.chooseSupplier(selectItem,item)"
                            filter="{AreaCode:base.areaCode}"
                            required   size="lg"></fm-data-select>
                    </td>
                    <td>
                   <!--     <span ng-if="form.normalType">{{item.partDescription}}</span> -->
                        <fm-text class="input-sm" 
                            fm-model="item.partNumber"
                            required
                            field-name="{{form.$pageLang.PartNumber}}"
                         ></fm-text>
                    </td>
                    <td>
                        <fm-text class="input-sm" 
                            fm-model="item.partDescription"
                            field-name="{{form.$pageLang.PartDescription}}"
                         ></fm-text>
                    </td>
                    <td>
                    <fm-select  
                                    fm-model="item.currency"
                                    field-name="{{form.$pageLang.Currency}}" 
                                   class="input-sm"  
                                   view="GetCurrency"
                                   required  style="background-color:white;"
                                    
                                   ></fm-select>
                    </td>
                    <td>
              <!--          <span ng-if="form.normalType">{{item.unitPrice}}</span> -->
                        <fm-number class="input-sm" 
                            fm-model="item.unitPrice"
                             required
                            scale="6"
                            callback-func="form.projectItem(item)"
      
                            field-name="{{form.$pageLang.UnitPrice}}"></fm-number>
                    </td>
                    <td>
                     
                        <fm-text class="input-sm" 
                            fm-model="item.leadTime"
                            required
                            field-name="{{form.$pageLang.LeadTime}}"></fm-text>
                    </td>
                    <td>
<!--                        <span ng-if="form.normalType">{{item.mpq}}</span> -->
                        <fm-text class="input-sm"
                            fm-model="item.mpq"
                                   required
                            field-name="{{form.$pageLang.Mpq}}"
                            ></fm-text>
                    </td>
                    <td>
                        <!--   <span ng-if="form.normalType">{{item.moq}}</span> -->
                        <fm-text class="input-sm" 
                            fm-model="item.moq"
                            field-name="{{form.$pageLang.MOQ}}"></fm-text>
                    </td>
                    <td>
<!--                        <span ng-if="form.normalType">{{item.toolLing}}</span> -->
                        <fm-number class="input-sm"
                            fm-model="item.toolLing"
                            callback-func="form.projectItem(item)"
                            fm-blur="form.number(item)"
                            field-name="{{form.$pageLang.ToolLing}}"
                          ></fm-number>
                    </td>
                    <td ng-if="base.areaCode=='YFVSJ'">
                   
                        <fm-select dataitem="PurchaseRelated>ScheduleOrder>ScheduleOrderModal"
                            fm-model="item.mmr"
                            fm-required="item.toolLing>0"
                            field-name="{{form.$pageLang.OpenModle}}"
                            
                           ></fm-select>
                    </td>

                </tr>

            </tbody>
        </table>
    </div>
</div>

<div class="row" ng-if="base.pageState==1&&!!base.areaCode">
    <div class="form-group">
             <div class="col-xs-10 text-right">
            <fm-import-advance config="form.import"
                form-files="form.$attachments"
                link-id="2"
                task-id='base.taskId'
                callback-func="form.importD(importData)"></fm-import-advance>
        </div>
        <div class="col-xs-2 text-right">
            <input type="button" class="btn btn-sm btn-info" ng-click="form.add()" value="{{form.$pageLang.Add}}"/>
            <input type="button" class="btn btn-sm btn-danger" ng-click="form.delete()" value="{{form.$pageLang.Delete}}"/>

        </div>
    </div>
</div>




<!--<div class="row">
    <div class="form-group">
        <div class="row col-xs-12">
            <span class="col-xs-2  "></span>
            <span class="col-xs-3  ">价格变更原因说明：</span>
            <span class="col-xs-1  "></span>
            <span class="col-xs-5  text-left text-danger">价格底色说明：</span>
        </div>
        <div class="row col-xs-12">
            <span class="col-xs-2  "></span>
            <span class="col-xs-3  ">Adjust－Adjustment</span>
            <span class="col-xs-1  "></span>
            <span class="col-xs-5  text-left text-danger">橙色：新旧价格差值超过原价格的±10%（含±10%）</span>
        </div>
         <div class="row col-xs-12">
             <span class="col-xs-2  "></span>
            <span class="col-xs-3  ">Costup－Cost up</span>
             <span class="col-xs-1  "></span>
            <span class="col-xs-5  text-left text-danger">黄色：新价格=原价格</span>
        </div>
        <div class="row col-xs-12">
            <span class="col-xs-2  "></span>
            <span class="col-xs-3  ">Ngcd－Negotiation costdown</span>
        </div>
         <div class="row col-xs-12">
             <span class="col-xs-2  "></span>
            <span class="col-xs-3  ">Spot－Input Spot PO</span>
        </div>
        <div class="row col-xs-12">
            <span class="col-xs-2  "></span>
            <span class="col-xs-3  ">Tooling－Tooling Amortize finish</span>
            
        </div>
         <div class="row col-xs-12 text-right">
                    <span class="col-xs-6"></span>
             <span class="col-xs-2">供应商签字确认：</span>
             <div class="col-xs-4">
                 <fm-text class="readonly"></fm-text>
             </div>
         </div>
    </div>
</div>-->
<!--备注-->
<fm-Group-Head title="{{form.$pageLang.Comment }}" class="required"></fm-Group-Head>
<div class="row">
            <div class="col-xs-12">
                <fm-textarea fm-model="form.pur08.remark" 
                             required
                            field-name="{{form.$pageLang.Comment}}"
                            ></fm-textarea>
            </div>
</div>
<!--附件-->
<fm-Group-Head class="print-hide" title="{{ 'Attachment' |translate}}"></fm-Group-Head>
<div class="print-hide row">
    <div class="form-group">
        <div class="col-xs-12">
                <fm-attachment form-files="form.$attachments"
                               link-id="0"
                               task-id='base.taskId'
                               node-id="base.nodeId"
                               draft-id="base.draftId"
                               
                               field-name="{{'UploadAttachment' |translate}}"
                               fm-model="form.$state.UploadAttachment"
                               button-name="{{ 'UploadAttachment' |translate}}"></fm-attachment>
                </div>
    </div>
</div>