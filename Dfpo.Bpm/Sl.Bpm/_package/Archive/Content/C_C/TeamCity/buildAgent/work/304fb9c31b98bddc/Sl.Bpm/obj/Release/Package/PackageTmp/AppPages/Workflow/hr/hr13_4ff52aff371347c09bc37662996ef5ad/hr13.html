<!--岗位培训需求审批-->
<fm-form-title sn-number="{{base.snNumber}}" apply-date="{{base.applyDate}}" sub-title='base.title' fm-model="base.areaCode"></fm-form-title>
<fm-Group-Head title="{{ base.$pageLang.PostByInfo }}"></fm-Group-Head>
<fm-initiator jobid='base.jobId' userinfo='base.initiator' taskid='base.taskId'></fm-initiator>
<fm-Group-Head title="{{form.$pageLang.join }}"></fm-Group-Head>
<fm-applicant jobid='base.applicantJobId' userinfo='base.applicant' taskid='base.taskId' wfid="base.workflowId"></fm-applicant>
<fm-Group-Head title="{{form.$pageLang.ApplicantInfo }}"></fm-Group-Head>

<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--岗位属性-->
            <span class="col-xs-2 control-label" ng-bind="form.$pageLang.PositionProperty"></span>
            <fm-checklist fm-model="form.hr13.positionProperty"
                          fm-disabled="form.$pageRight.Hr13Node5=='readonly'"
                          callback-func="form.changePositionProperty(selectItem,fmModel)"
                          fm-normal="form.$pageRight.Hr13Node8=='normal' && base.pageState==2"
                          field-name="{{form.$pageLang.PositionProperty}}"
                          dataitem="HRRelated>Training>JobProperty">
            </fm-checklist>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
           
                <!--教材链接地址-->
                <span class="col-xs-2 control-label" ng-bind="form.$pageLang.LinkAddress"></span>
                <div class="col-xs-10" >
                    <a target="_blank" href="/AppPages/File/PostTraining.zip">岗位培训资质教材</a>
                </div>
            </div>
        </div>
    
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--培训课时-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Decimal"></span>
            <div class="col-xs-4">
                <fm-text unit="小时"
                           readonly
                          fm-disabled="form.$pageRight.Hr13Node5=='readonly'"
                         fm-model="form.hr13.decimal"></fm-text>
            </div>
        </div>
    </div>
</div>
<div class="row" ng-if="(form.$pageRight.Hr13Node7=='normal' || form.$pageRight.Hr13Node7=='readonly') && base.pageState==2">
    <div class="form-group">
        <div class="col-xs-12">
            <!--岗位资质考核结果-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Jobqualification"></span>
            <div class="col-xs-4">
                <fm-select dataitem="HRRelated>Training>Result" fm-model="form.hr13.positionResult"  fm-normal="form.$pageRight.Hr13Node7=='normal' && base.pageState==2" required  field-name="{{form.$pageLang.Jobqualification}}"></fm-select>
            </div>
            <div ng-if="form.hr13.positionResult=='67d093e0-49b1-4867-8e5b-0aaa9c01213e'">
                <!--岗位资质有效期-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.Jobqualificationvalidityperiod"></span>
                <div class="col-xs-4">
                    <fm-datetime fm-model="form.hr13.positionExpiryDate" date readonly required field-name="{{form.$pageLang.Jobqualificationvalidityperiod}}"></fm-datetime>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-if="form.$pageRight.Hr13Node2=='readonly' && base.pageState==2">
    <fm-Group-Head title="{{form.$pageLang.KnowledgeSkillTrainingContent}}"></fm-Group-Head>
    <div class="row">
        <div class="col-xs-12">
            <table class="table table-bordered table-detail">
                <thead>
                    <tr style="background-color:#0066cc">
                        <th ng-bind="form.$pageLang.No"></th> <!--序号-->
                        <td ng-bind="form.$pageLang.Content"></td> <!--内容-->
                        <td ng-bind="form.$pageLang.PlanDate"></td> <!--计划培训日期-->
                        <td ng-bind="form.$pageLang.Trainer"></td> <!--讲师-->
                        <td ng-bind="form.$pageLang.Hours"></td> <!--课时-->
                        <td ng-bind="form.$pageLang.ActualDate"></td> <!--实际培训日期-->
                        <td ng-bind="form.$pageLang.EffecEvalResult"></td> <!--有效性评估结论-->
                        <td ng-bind="form.$pageLang.Remark"></td> <!--备注-->
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in form.hr13detail" ng-class="{ 'active': item.checked}" detail-name="{{form.$pageLang.Fare}}">
                        <td class="auto-style1">
                            <input   fm-normal="form.$pageRight.Hr13Node3=='normal' && base.pageState==2"
                                   state="{{form.$pageRight.ACRNO2}}"
                                   type="checkbox"
                                   ng-model="item.checked" />
                            <strong class="input-sm"   fm-normal="form.$pageRight.Hr13Node3=='normal' && base.pageState==2">{{ $index + 1}}</strong>
                        </td>
                        <td>
                            <fm-text field-name="{{form.$pageLang.PlanDate}}"
                                     required
                                     class="input-sm"
                                     max-length="100"
                                     state="{{form.$pageRight.StartNode}}"
                                     fm-normal="form.$pageRight.Hr13Node3=='normal' && base.pageState==2"
                                     fm-model="item.content"></fm-text>
                        </td>
                        <td>

                            <fm-datetime class="input-sm"
                                         date
                                         required
                                         field-name="{{form.$pageLang.PlanDate}}"
                                         fm-model="item.planDate"
                                         fm-normal="form.$pageRight.Hr13Node3=='normal' && base.pageState==2"
                                         state="{{form.$pageRight.StartNode}}"
                                         fm-placeholder="{{form.$pageLang.SelectDate}}"></fm-datetime>
                        </td>
                        <td>
                            <fm-text field-name="{{form.$pageLang.Trainer}}"
                                     required
                                     class="input-sm"
                                     max-length="50"
                                     fm-normal="form.$pageRight.Hr13Node3=='normal' && base.pageState==2"
                                     state="{{form.$pageRight.StartNode}}"
                                     fm-model="item.trainer"></fm-text>
                        </td>
                        <td>

                            <fm-number class="input-sm"
                                       cny
                                       required
                                       min-value="0"
                                       field-name="{{form.$pageLang.Hours}}"
                                       fm-model="item.hours"
                                       max-value="1000000"
                                       fm-normal="form.$pageRight.Hr13Node3=='normal' && base.pageState==2"
                                       state="{{form.$pageRight.StartNode}}"
                                       callback-func="form.sum(data)"></fm-number>

                        </td>
                        <td>
                            <fm-datetime class="input-sm"
                                         date
                                         required
                                         fm-normal="form.$pageRight.Hr13Node10=='normal' && base.pageState==2"
                                         field-name="{{form.$pageLang.ActualDate}}"
                                         fm-model="item.actualDate"
                                         state="{{form.$pageRight.StartNode}}"
                                         fm-placeholder="{{form.$pageLang.SelectDate}}"></fm-datetime>
                        </td>
                        <td>
                            <fm-radiolist fm-model="item.effectEvalResult"
                                          callback-func="form.chooseEffectEvalResult()"
                                          fm-normal="form.$pageRight.Hr13Node4=='normal' && base.pageState==2"
                                          fm-disabled="form.$pageRight.Hr13Node1=='readonly'"
                                          required
                                          field-name="{{form.$pageLang.EffecEvalResult}}" 
                                          dataitem="HRRelated>Training>EffectiveResult"></fm-radiolist>
                        </td>
                        <td>
                            <fm-text field-name="{{form.$pageLang.Remark}}"
                                     class="input-sm"
                                     max-length="100"
                                     fm-required="item.effectEvalResult!='CF7A9A15-4297-4EB1-86A1-580F2DBAA4B3'"
                                     fm-normal="form.$pageRight.Hr13Node4=='normal' && base.pageState==2"
                                     fm-disabled="form.$pageRight.Hr13Node1=='readonly'"
                                     state="{{form.$pageRight.StartNode}}"
                                     fm-model="item.remark"></fm-text>
                        </td>
                        
                    </tr>

                </tbody>
                <tfoot ng-if="form.$pageRight.Hr13Node1=='readonly' && base.pageState==2">
                    <tr>
                        <td colspan="99" style="text-align:right;">
                            <input  type="button" class="btn btn-sm btn-info" ng-click="form.add()" value="{{ 'Add' |translate}}"  />
                            <input  type="button" class="btn btn-sm btn-danger" ng-click="form.delete ()" value="{{ 'Delete' |translate}}"    />
                        </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>
<div ng-if="(form.$pageRight.Hr13Node6=='normal' || form.$pageRight.Hr13Node6=='readonly') && base.pageState==2">
    <fm-Group-Head title="{{form.$pageLang.TrainingSummary}}" class="required"></fm-Group-Head>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--应知应会培训情况小结-->
                <fm-textarea max-length="1000"  required fm-model="form.hr13.trainingSummary" fm-normal="form.$pageRight.Hr13Node6=='normal' && base.pageState==2" field-name="{{form.$pageLang.TrainingSummary}}"></fm-textarea>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--应知应会培训结论-->
                <span class="col-xs-2 control-label required"  ng-bind="form.$pageLang.KnowSkillTrainingResult"></span>
                <div class="col-xs-4">
                    <fm-select dataitem="HRRelated>Training>Result" required fm-model="form.hr13.knowSkillTrainingResult" fm-normal="form.$pageRight.Hr13Node6=='normal' && base.pageState==2" field-name="{{form.$pageLang.KnowSkillTrainingResult}}"></fm-select>
                </div>
            </div>
        </div>
    </div>
</div>
<!--附件-->
<div ng-if="base.pageState==2">
    <fm-Group-Head class="print-hide" title="{{ 'Attachment' |translate}}"></fm-Group-Head>
    <div class="print-hide row">
        <div class="form-group">
            <div class="col-xs-12">
             
                <div class="col-xs-12">
                    <fm-attachment form-files="form.$attachments"
                                   link-id="0"
                                   task-id='base.taskId'
                                   fm-normal="form.$pageRight.Hr13Node9=='normal' && base.pageState==2"
                                   node-id="base.nodeId"
                                   draft-id="base.draftId"
                                   state="{{form.$pageRight.StartNode}}"
                                   field-name="{{'UploadAttachment' |translate}}"
                                   fm-model="form.$state.UploadAttachment"
                                   button-name="{{ 'UploadAttachment' |translate}}"></fm-attachment>
                </div>
            </div>
        </div>
    </div>
</div>
