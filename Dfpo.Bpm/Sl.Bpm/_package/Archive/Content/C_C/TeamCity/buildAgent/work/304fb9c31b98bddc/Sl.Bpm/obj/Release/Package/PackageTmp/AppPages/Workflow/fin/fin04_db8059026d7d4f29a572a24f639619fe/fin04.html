
<fm-form-title sn-number="{{base.snNumber}}" apply-date="{{base.applyDate}}" sub-title='base.title' fm-model="base.areaCode" callback-func="form.changeareaCode()"></fm-form-title>
<fm-Group-Head title="{{ base.$pageLang.PostByInfo }}"></fm-Group-Head>
<fm-initiator jobid='base.jobId' userinfo='base.initiator' taskid='base.taskId'></fm-initiator>

<fm-Group-Head title="{{ form.$pageLang.ApplicantInfo }}"></fm-Group-Head>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--发票类型-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.DomesticOrExport"></span>
            <div class="col-xs-4">
                <fm-select fm-model="form.fin04.domesticOrExport"
                           required
                           callback-func="form.clearData()"
                           field-name="{{form.$pageLang.DomesticOrExport}}"
                           dataitem="Finance>NonProductive>DomesticOrExport"></fm-select>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--发票类型 ng-bind="form.$pageLang.InvoiceType"-->
            <span class="col-xs-2 control-label" ></span>
            <div class="col-xs-4">
                <fm-select fm-model="form.fin04.invoiceType"
                           required
                           field-name="{{form.$pageLang.InvoiceType}}"
                           dataitem="Finance>NonProductive>InvoiceType"></fm-select>

            </div>
            <!--其他发票类型描述-->
            <div ng-if="form.fin04.invoiceType=='77c86c7e-ba57-4933-a76d-5bc0afef6a2d'">
                <span class="col-xs-2 control-label  " ng-bind="form.$pageLang.InvoiceTypeOthers"></span>
                <div class="col-xs-4">
                    <fm-text fm-model="form.fin04.invoiceTypeOthers"
                             required
                             field-name="{{form.$pageLang.InvoiceTypeOthers}}"></fm-text>
                </div>
            </div>
        </div>
    </div>
</div>
<fm-Group-Head title="{{ form.$pageLang.Confirm }}"></fm-Group-Head>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--是否非计划出货-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.IsShippedNonPlan"></span>
            <div class="col-xs-4">
                <fm-select fm-model="form.fin04.isShippedNonPlan"
                           required
                           fm-disabled="base.areaCode=='YFVIC' || base.areaCode=='SHTC'"
                           dataitem="Common>YesOrNo"
                           field-name="{{form.$pageLang.IsShippedNonPlan}}"></fm-select>

            </div>
            <!--非计划领料单号-->
            <div ng-if="!(base.areaCode=='YFVIC' || base.areaCode=='SHTC')">
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.RequisitionNumber"></span>
                <div class="col-xs-4">
                    <fm-data-select view="GetNoPlannedRequisitionNumber" fm-model="form.fin04.unplannedRequisitionNumber"></fm-data-select>


                </div>
            </div>

        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--描述-->
            <span class="col-xs-2 control-label " ng-bind="form.$pageLang.Description"></span>
            <div class="col-xs-10">
                <fm-textarea fm-model="form.fin04.description"
                             field-name="{{form.$pageLang.Description}}"></fm-textarea>
            </div>
        </div>
    </div>
</div>
<div ng-if="form.fin04.domesticOrExport=='42025C10-3BBF-4942-A7CC-65E36CB7224D'">
    <fm-Group-Head title="{{ form.$pageLang.Domestic }}"></fm-Group-Head>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--合同号-->
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.ContractNo"></span>
                <div class="col-xs-4">
                    <fm-text fm-model="form.fin04.contractNo"
                             field-name="{{form.$pageLang.ContractNo}}"></fm-text>

                </div>
                <!--发票类型-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.InvoiceType2"></span>
                <div class="col-xs-4">
                    <fm-select fm-model="form.fin04.invoiceType2"
                               required
                               field-name="{{form.$pageLang.InvoiceType2}}"
                               dataitem="Finance>NonProductive>InvoiceType2"></fm-select>

                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--收票单位名称-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.TicketCollectorUnitName"></span>
                <div class="col-xs-4">
                    <fm-data-select view="GetReceivingUnitInfo" callback-func="form.chooseTicketCollectorUnitName(selectItem)" required fm-model="form.fin04.ticketCollectorUnitName" field-name="{{form.$pageLang.TicketCollectorUnitName}}"></fm-data-select>
                </div>
                <!-- 收票单位税务登记号 -->
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.RegistrationNumber"></span>
                <div class="col-xs-4">
                    <fm-text readonly
                             fm-model="form.fin04.ticketCollectorUnitTaxRegistrationNumber"></fm-text>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--开户银行名称-->
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.BankName"></span>
                <div class="col-xs-4">
                    <fm-text readonly fm-model="form.fin04.bankName"></fm-text>
                </div>
                <!-- 收票单位银行账号-->
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.BankAccount"></span>
                <div class="col-xs-4">
                    <fm-text readonly fm-model="form.fin04.ticketCollectorUnitBankAccount"></fm-text>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--收票人名字-->
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.TicketCollectorName"></span>
                <div class="col-xs-4">
                    <fm-text readonly fm-model="form.fin04.ticketCollectorName"></fm-text>
                </div>
                <!--收票人电话/邮箱-->
                <span class="col-xs-2 control-label" ng-bind="form.$pageLang.PhoneEmail"></span>
                <div class="col-xs-4">
                    <fm-text readonly fm-model="form.fin04.ticketCollectorPhoneEmail"></fm-text>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--收票人地址-->
                <span class="col-xs-2 control-label" ng-bind="form.$pageLang.TicketCollectorAddress"></span>
                <div class="col-xs-10">
                    <fm-textarea readonly fm-model="form.fin04.ticketCollectorAddress"></fm-textarea>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--开票内容-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.BillingContent"></span>
                <div class="col-xs-10">
                    <fm-textarea fm-model="form.fin04.billingContent" required field-name="{{form.$pageLang.BillingContent}}"></fm-textarea>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--开票金额-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.BillingAmount"></span>
                <div class="col-xs-4">
                    <fm-number fm-model="form.fin04.billingAmount" readonly required field-name="{{form.$pageLang.BillingAmount}}"></fm-number>

                </div>
                <!--是否含税-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.IsTax"></span>
                <div class="col-xs-4">
                    <fm-select fm-model="form.fin04.isTax"
                               required
                               display-member="text"
                               callback-func="form.chose(item)"
                               field-name="{{form.$pageLang.IsTax}}"
                               dataitem="Common>YesOrNo"></fm-select>

                </div>

            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--预计收款期限-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.ExpectedCollectionPeriod"></span>
                <div class="col-xs-4">
                    <fm-number fm-model="form.fin04.expectedCollection" required field-name="{{form.$pageLang.ExpectedCollectionPeriod}}"></fm-number>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--备注-->
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.Remark"></span>
                <div class="col-xs-10">
                    <fm-textarea fm-model="form.fin04.remark" field-name="{{form.$pageLang.Remark}}"></fm-textarea>
                </div>
            </div>
        </div>
    </div>
</div>
<div ng-if="form.fin04.domesticOrExport=='C45EE635-7EF6-4EB4-BDF1-C787CD481037'">
    <fm-Group-Head title="{{ form.$pageLang.Export }}"></fm-Group-Head>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--发运地址-->
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.ShippedAddress"></span>
                <div class="col-xs-4">
                    <fm-text fm-model="form.fin04.shippedAddress" field-name="{{form.$pageLang.ShippedAddress}}"></fm-text>
                </div>
                <!--Attention-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.ShippedAttention"></span>
                <div class="col-xs-4">
                    <fm-text required fm-model="form.fin04.shippedAttention" field-name="{{form.$pageLang.ShippedAttention}}"></fm-text>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--Tel-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.ShippedTel"></span>
                <div class="col-xs-4">
                    <fm-text required fm-model="form.fin04.shippedTel" field-name="{{form.$pageLang.ShippedTel}}"></fm-text>
                </div>
                <!--Email-->
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.ShippedEmail"></span>
                <div class="col-xs-4">
                    <fm-text fm-model="form.fin04.shippedEmail" field-name="{{form.$pageLang.ShippedEmail}}"></fm-text>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--发票地址-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.BilledAddress"></span>
                <div class="col-xs-4">
                    <fm-text required fm-model="form.fin04.billedAddress" field-name="{{form.$pageLang.BilledAddress}}"></fm-text>
                </div>
                <!--是否原件寄出-->
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.IsTheOriginalSent"></span>
                <div class="col-xs-4">
                    <fm-select dataitem="Common>YesOrNo" fm-model="form.fin04.isTheOriginalSent" field-name="{{form.$pageLang.IsTheOriginalSent}}"></fm-select>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--Attention-->
                <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.BilledAttention"></span>
                <div class="col-xs-4">
                    <fm-text required fm-model="form.fin04.billedAttention" field-name="{{form.$pageLang.BilledAttention}}"></fm-text>
                </div>
                <!--发票联系人-->
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.BilledTel"></span>
                <div class="col-xs-4">
                    <fm-text fm-model="form.fin04.billedTel" field-name="{{form.$pageLang.BilledTel}}"></fm-text>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="form-group">
            <div class="col-xs-12">
                <!--发票邮箱地址-->
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.BilledEmail"></span>
                <div class="col-xs-4">
                    <fm-text fm-model="form.fin04.billedEmail" field-name="{{form.$pageLang.BilledEmail}}"></fm-text>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xs-12">
        <table class="table table-bordered table-detail">
            <thead>
                <tr>
                    <th class="checktd"><input type="checkbox" class="uniform" ng-checked="form.fin04sAllChecked" ng-model="form.fin04sAllChecked" ng-click="form.selectAll(form.fin04sAllChecked, form.fin04s)" /></th> <!--标记-->
                    <th style="width:50px;color:white;text-align:center;" ng-bind="form.$pageLang.No"></th> <!--序列-->
                    <th style="width:150px; color:white; text-align:center;" ng-bind="form.$pageLang.Po"></th> <!--PO-->
                    <th style="width:150px; color:white; text-align:center;" ng-bind="form.$pageLang.Customer"></th> <!--Customer  P/N-->
                    <th style="width:150px; color:white; text-align:center;" ng-bind="form.$pageLang.Yfves"></th> <!--YFVES P/N-->
                    <th style="width:150px; color:white; text-align:center;" ng-bind="form.$pageLang.Description"></th> <!--Description-->
                    <th style="width:150px; color:white; text-align:center;" ng-bind="form.$pageLang.ShippedDate"></th> <!--Shipped Date-->
                    <th style="width:150px; color:white; text-align:center;" ng-bind="form.$pageLang.Qty"></th> <!--Qty-->
                    <th style="width:150px; color:white; text-align:center;" ng-bind="form.$pageLang.up"></th> <!--u/p-->
                    <th style="width:150px; color:white; text-align:center;" ng-bind="form.$pageLang.Currency"></th> <!--Currency-->
                    <th style="width:150px; color:white; text-align:center;" ng-bind="form.$pageLang.Amount"></th> <!--Amount-->
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in form.fin04s" ng-class="{ 'active': item.checked}" detail-name="{{form.$pageLang.BusinessEntertainmentExpensesReimbursementList}}">
                    <td class="checktd">
                        <input class="uniform"
                               ng-if="base.pageState==1 || (form.$pageRight.StartNode == 'normal' && base.pageState==2) "
                               type="checkbox" ng-model="item.checked" />
                    </td>
                    <td>
                        <fm-number ng-if="item.gridOrder!=null"
                                   fm-model="item.gridOrder"></fm-number>
                        <span ng-if="item.gridOrder == null">{{$index + 1}}</span>
                    </td>
                    <td>
                        <fm-text fm-model="item.po" field-name="{{form.$pageLang.Po}}"></fm-text>
                    </td>
                    <td>
                        <fm-text fm-model="item.customer" field-name="{{form.$pageLang.Customer}}"></fm-text>
                    </td>
                    <td>
                        <fm-text fm-model="item.yfves" field-name="{{form.$pageLang.Yfves}}"></fm-text>
                    </td>
                    <td>
                        <fm-text required fm-model="item.description" field-name="{{form.$pageLang.Description}}"></fm-text>
                    </td>
                    <td>
                        <fm-datetime fm-model="item.shippedDate"
                                     date
                                     required
                                     field-name="{{form.$pageLang.ShippedDate}}"></fm-datetime>
                    </td>
                    <td>
                        <fm-number required display-scale="2" field-name="{{form.$pageLang.Qty}}" fm-blur="form.sum(item)"
                                   fm-model="item.qty"></fm-number>
                    </td>
                    <td>
                        <fm-number required fm-model="item.up" display-scale="2" fm-blur="form.sum(item)" field-name="{{form.$pageLang.up}}"></fm-number>
                    </td>
                    <td>
                        <fm-select fm-model="item.currency"
                                   view="GetCurrencyType"
                                   required
                                   field-name="{{form.$pageLang.Currency}}"></fm-select>
                    </td>
                    <td>
                        <fm-number readonly fm-model="item.amount" display-scale="2"></fm-number>
                    </td>
                </tr>
            </tbody>
            <tfoot>

                <tr>

                    <td colspan="99" style="text-align:left;">
                        <table style="width:100%;">
                            <tr>
                                <td style="text-align:right;border:0px;">
                                    <input ng-if="base.pageState==1 || (form.$pageRight.StartNode == 'normal' && base.pageState==2)" type="button" class="btn btn-sm btn-info" ng-click="form.add(item)" value="{{form.$pageLang.Add}}" />
                                    <input ng-if="base.pageState==1 || (form.$pageRight.StartNode == 'normal' && base.pageState==2)" type="button" class="btn btn-sm btn-danger" ng-click="form.delete()" value="{{form.$pageLang.Delete}}" />
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>


            </tfoot>
        </table>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--Total without Tax-->
            <div ng-if="form.fin04.isTax=='51B9F2E4-FBE9-400A-A789-A296E30177BF'">
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.TotalwithoutTax"></span>
                <div class="col-xs-4">
                    <fm-number fm-model="form.fin04.totalwithoutTax"
                               readonly
                               state="{{form.$pageRight.StartNode}}"></fm-number>

                </div>
            </div>
            <div ng-if="form.fin04.isTax=='D17A7445-9082-4A80-80E4-F47B4D19049E'">
                <!--Total with Tax-->
                <span class="col-xs-2 control-label " ng-bind="form.$pageLang.TotalwithTax"></span>
                <div class="col-xs-4">
                    <fm-number fm-model="form.fin04.totalwithTax"
                               readonly
                               state="{{form.$pageRight.StartNode}}"></fm-number>

                </div>
            </div>
        </div>
    </div>
</div>
<div class="row" ng-if="form.fin04.domesticOrExport=='42025C10-3BBF-4942-A7CC-65E36CB7224D'">
    <div class="form-group">
        <div class="col-xs-12">
            <!--Tax 是否含税-->
            <span class="col-xs-2 control-label  " ng-bind="form.$pageLang.IsTax"></span>
            <div class="col-xs-4">
                <fm-text fm-model="form.fin04.tax"
                         readonly
                         state="{{form.$pageRight.StartNode}}"></fm-text>

            </div>
        </div>
    </div>
</div>
<div class="row" ng-if="form.fin04.domesticOrExport=='C45EE635-7EF6-4EB4-BDF1-C787CD481037'">
    <div class="form-group">
        <div class="col-xs-12">
            <!--Tax 是否含税-->
            <span class="col-xs-2 control-label  required" ng-bind="form.$pageLang.IsTax"></span>
            <div class="col-xs-4">
                <fm-select fm-model="form.fin04.tax"
                           dataitem="Common>YesOrNo"
                           field-name="{{form.$pageLang.IsTax}}"
                           state="{{form.$pageRight.StartNode}}"></fm-select>

            </div>
        </div>
    </div>
</div>
<div class="print-hide row">
    <div class="form-group">
        <div class="col-xs-12">
            <span class="col-xs-2 control-label " ng-bind="form.$pageLang.POAttached"></span>
            <div class="col-xs-4">
                <fm-attachment form-files="form.$attachments"
                               link-id="0"
                               task-id='base.taskId'
                               node-id="base.nodeId"
                               draft-id="base.draftId"
                               state="{{form.$pageRight.StartNode}}"
                               field-name="{{'UploadAttachment' |translate}}"
                               fm-model="form.$state.UploadAttachment"
                               button-name="{{ 'UploadAttachment' |translate}}"></fm-attachment>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="form-group">
        <div class="col-xs-12">
            <!--账号及成本中心-->
            <span class="col-xs-2 control-label required" ng-bind="form.$pageLang.AccountAndCostCenter"></span>
            <div class="col-xs-10">
                <fm-textarea fm-model="form.fin04.accountAndCostCenter"
                             required
                             fm-disabled="form.$pageRight.fin04Node1 != 'normal'"
                             fm-normal="form.$pageRight.fin04Node1=='normal' && base.pageState==2"
                             field-name="{{form.$pageLang.AccountAndCostCenter}}"></fm-textarea>
            </div>
        </div>
    </div>
</div>